!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,(function(e){return a(t[o][1][e]||e)}),d,d.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";var r;(0,((r=e("./lib/modules/viewUpdater.js"))&&r.__esModule?r:{default:r}).default)("camera")},{"./lib/modules/viewUpdater.js":17}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"randomString",value:function(){return Math.random().toString(36).substr(2,5)}},{key:"toFixed",value:function(e,t){return null!=e?e.toFixed(t):0}},{key:"generateTime",value:function(e){var t="";if(void 0===e||isNaN(e)||null===e)t="No Time Estimate";else{Math.floor(e/131400);var n=Math.floor(e/86400);e-=3600*n*24;var r=Math.floor(e/3600);e-=3600*r;var a=Math.floor(e/60);e-=60*a,e=Math.floor(e),t="".concat(n,"d, ").concat(r,"h, ").concat(a,"m, ").concat(e,"s"),0===a&&t.includes("0m")&&(t=t.replace(" 0m,","")),0===r&&t.includes("0h")&&(t=t.replace(" 0h,","")),0===n&&t.includes("0d")&&(t=t.replace("0d,","")),0===a&&0===r&&0===n&&0===e&&(t=t.replace("0s","Done"))}return t}},{key:"isBetween",value:function(e,t,n){return(e-t)*(e-n)<=0}},{key:"returnPrintCost",value:function(e,t){if(void 0===e)return"No cost settings to calculate from";var n=t/3600,r=parseFloat(e.powerConsumption)*parseFloat(e.electricityCosts)*n,a=parseFloat(e.purchasePrice),i=parseFloat(e.estimateLifespan);return(r+((i>0?a/i:0)+parseFloat(e.maintenanceCosts))*n).toFixed(2)}},{key:"bytes",value:function(e,t){if(void 0===e||isNaN(e)||null===e)return"No File Estimate";if(0==e)return"0 Bytes";var n=t||2,r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(n))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r])}},{key:"dateClean",value:function(e){return e=new Date(e),"".concat(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]," ").concat(e.getFullYear()," - ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();n.default=a},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dragCheck=function(){return d.apply(this,arguments)},n.dragAndDropEnable=function(e,t){var n=document.getElementById(e.id);["dragenter","dragover","dragleave","drop"].forEach((function(e){n.addEventListener(e,u,!1),document.body.addEventListener(e,u,!1)})),["dragenter","dragover"].forEach((function(t){n.addEventListener(t,(function(t){l=!0,e.classList.add("highlight")}),!1)})),["dragleave","drop"].forEach((function(t){n.addEventListener(t,(function(t){l=!1,e.classList.remove("highlight")}),!1)})),n.addEventListener("drop",(function(e){var n;n=t,p(e.dataTransfer.files,n)}),!1)},n.handleFiles=p;var r=o(e("../modules/fileManager.js")),a=o(e("./ui.js")),i=o(e("./validate.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,c,"next",e)}function c(e){s(i,r,a,o,c,"throw",e)}o(void 0)}))}}var l=!1;function d(){return(d=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){e.preventDefault(),e.stopPropagation()}function p(e,t){1===e.length?bootbox.confirm({message:"Would you like to print upon upload?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(n){n?(a.default.createAlert("warning","".concat(i.default.getName(t),": started upload"),3e3,"Clicked"),r.default.handleFiles(e,t,"print")):(a.default.createAlert("warning","".concat(i.default.getName(t),": started upload"),3e3,"Clicked"),r.default.handleFiles(e,t))}}):(a.default.createAlert("warning","".concat(i.default.getName(t),": started upload"),3e3,"Clicked"),r.default.handleFiles(e,t))}},{"../modules/fileManager.js":11,"./ui.js":5,"./validate.js":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("submit"==e.type)return;e.requestFullscreen(),document.fullscreenElement&&document.exitFullscreen()}},{}],5:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getColour",value:function(e){return"Operational"===e?{name:"secondary",hex:"#262626",category:"Idle"}:"Paused"===e?{name:"warning",hex:"#583c0e",category:"Idle"}:"Printing"===e||"Pausing"===e||"Cancelling"===e?{name:"warning",hex:"#583c0e",category:"Active"}:"Error"===e?{name:"danger",hex:"#2e0905",category:"Idle"}:"Offline"===e?{name:"danger",hex:"#2e0905",category:"Offline"}:"Searching..."===e?{name:"danger",hex:"#2e0905",category:"Idle"}:"Closed"===e?{name:"danger",hex:"#2e0905",category:"Closed"}:"Complete"===e?{name:"success",hex:"#00330e",category:"Complete"}:{name:"danger",hex:"#2e0905",category:"Offline"}}},{key:"createMessage",value:function(e,t){var n=document.getElementById(t),r='\n      <div class="alert alert-'.concat(e.type,' alert-dismissible fade show" role="alert">\n        ').concat(e.msg,'\n      <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n      </button>\n    </div>\n    ');n.insertAdjacentHTML("beforeend",r)}},{key:"createAlert",value:function(e,t,n,r){r=null!=r?["click"]:[],Noty.setMaxVisible(50);var a=new Noty({type:e,theme:"bootstrap-v4",closeWith:r,timeout:n,layout:"bottomRight",text:t});return a.show(),a}},{key:"doesElementNeedUpdating",value:function(e,t,n){t&&JSON.stringify(e)!==JSON.stringify(t[n])&&(t[n]=e)}},{key:"clearSelect",value:function(e){document.querySelectorAll("*[id^="+e+"]").forEach((function(e){e.value=""}))}},{key:"addSelectListeners",value:function(e){document.querySelectorAll("*[id^="+e+"]").forEach((function(e){e.addEventListener("focus",(function(t){e.value!==e.placeholder&&(e.value=e.placeholder)})),e.addEventListener("focusout",(function(t){e.value!==e.placeholder&&(e.placeholder=e.value)}))}))}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();n.default=a},{}],6:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"URL",value:function(e){var t;return t||(t=document.createElement("input")).setAttribute("type","url"),t.value=e,t.validity.valid}},{key:"IP",value:function(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}},{key:"JSON",value:function(e){return!!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}},{key:"getName",value:function(e){return void 0!==e.settingsAppearance?""===e.settingsAppearance.name||null===e.settingsAppearance.name?e.printerURL:e.settingsAppearance.name:e.printerURL}},{key:"stripHTML",value:function(e){var t=document.createElement("DIV");t.innerHTML=e;var n=t.textContent||t.innerText||"";return n.replace("â€‹",""),n=n.trim()}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();n.default=a},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=function(e,t){return v.apply(this,arguments)},n.printerQuickConnected=b,n.printerQuickDisconnected=g,n.checkQuickConnectState=function(e){document.getElementById("printerQuickConnect-"+e._id).disabled="Offline"===e.printerState.colour.category,"Offline"!==e.printerState.colour.category&&"Disconnected"===e.printerState.colour.category||"Error!"===e.printerState.colour.category?g(e._id):"Offline"!==e.printerState.colour.category&&"Disconnected"!==e.printerState.colour.category&&"Error!"!==!e.printerState.colour.category?b(e._id):g(e._id)};var r=s(e("../powerButton.js")),a=s(e("../../functions/ui")),i=s(e("../../octoprint")),o=s(e("../../octofarm"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,s,"next",e)}function s(e){c(i,r,a,o,s,"throw",e)}o(void 0)}))}}function d(e){return'\n    <button  \n         title="Control Your Printer"\n         id="printerButton-'.concat(e,'"\n         type="button"\n         class="tag btn btn-primary btn-sm"\n         data-toggle="modal"\n         data-target="#printerManagerModal" disabled\n         >\n            <i class="fas fa-print"></i>\n    </button>\n    ')}function u(e,t){return'\n            <a title="Open OctoPrint"\n               id="printerWeb-'.concat(e,'"\n               type="button"\n               class="tag btn btn-info btn-sm"\n               target="_blank"\n               href="').concat(t,'" role="button"><i class="fas fa-globe-europe"></i></a>\n    ')}function p(e){return'\n            <button  \n                     title="Re-Sync your printer"\n                     id="printerSyncButton-'.concat(e,'"\n                     type="button"\n                     class="tag btn btn-success btn-sm"\n            >\n                <i class="fas fa-sync"></i>\n            </button>\n    ')}function m(e){return'\n    <button  \n         title="Quickly connect/disconnect your printer"\n         id="printerQuickConnect-'.concat(e,'"\n         type="button"\n         class="tag btn btn-danger btn-sm"\n         >\n            <i class="fas fa-toggle-off"></i>\n    </button>\n    ')}function f(e){return'\n      <div class="btn-group" id="powerBtn-'.concat(e,'">\n      \n      </div>\n  ')}function b(e){var t=document.getElementById("printerQuickConnect-"+e);t.innerHTML='<i class="fas fa-toggle-on"></i>',t.classList.remove("btn-danger"),t.classList.add("btn-success"),t.title="Press to connect your printer!"}function g(e){var t=document.getElementById("printerQuickConnect-"+e);t.innerHTML='<i class="fas fa-toggle-off"></i>',t.classList.remove("btn-success"),t.classList.add("btn-danger"),t.title="Press to connect your printer!"}function v(){return(v=l(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById(n).innerHTML="\n    ".concat(d(t._id),"  \n    ").concat(u(t._id,t.printerURL),"  \n    ").concat(p(t._id),"  \n    ").concat(m(t._id),"  \n    ").concat(f(t._id),"  \n  "),e.next=3,r.default.applyBtn(t,"powerBtn-");case 3:return null!=t.currentConnection&&null!=t.currentConnection.port&&"Offline"!=t.printerState.colour.category?b(t._id):g(t._id),"Offline"===t.printerState.colour.category?document.getElementById("printerQuickConnect-"+t._id).disabled=!0:document.getElementById("printerQuickConnect-"+t._id).disabled=!1,y(t),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){document.getElementById("printerQuickConnect-".concat(e._id)).addEventListener("click",function(){var t=l(regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.disabled=!0,!document.getElementById("printerQuickConnect-"+e._id).classList.contains("btn-danger")){t.next=10;break}return r={},void 0!==e.connectionOptions?r={command:"connect",port:e.connectionOptions.portPreference,baudrate:e.connectionOptions.baudratePreference,printerProfile:e.connectionOptions.printerProfilePreference,save:!0}:(a.default.createAlert("warning","".concat(e.printerName," has no preferences saved, defaulting to AUTO..."),8e3,"Clicked"),r.command="connect",r.port="AUTO",r.baudrate="AUTO",r.printerProfile="_default",r.save=!1),t.next=6,i.default.post(e,"connection",r);case 6:void 0!==(o=t.sent)?204===o.status?a.default.createAlert("success","Successfully made connection attempt to ".concat(e.printerName,"..."),3e3,"Clicked"):a.default.createAlert("error","There was an issue connecting to ".concat(e.printerName," it's either not online, or the connection options supplied are not available..."),3e3,"Clicked"):a.default.createAlert("error","No response from ".concat(e.printerName,", is it online???"),3e3,"Clicked"),t.next=11;break;case 10:bootbox.confirm({message:"Are you sure you want to disconnect your printer?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(){var t=l(regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return r={command:"disconnect"},t.next=4,i.default.post(e,"connection",r);case 4:void 0!==(o=t.sent)?204===o.status?a.default.createAlert("success","Successfully made disconnect attempt to ".concat(e.printerName,"..."),3e3,"Clicked"):a.default.createAlert("error","There was an issue disconnecting to ".concat(e.printerName," are you sure it's online?"),3e3,"Clicked"):a.default.createAlert("error","No response from ".concat(e.printerName,", is it online???"),3e3,"Clicked");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.getElementById("printerSyncButton-".concat(e._id)).addEventListener("click",function(){var t=l(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.target.innerHTML="<i class='fas fa-sync fa-spin'></i>",n.target.disabled=!0,r={id:e._id},t.next=5,o.default.post("printers/reScanOcto",r);case 5:return i=t.sent,t.next=8,i.json();case 8:"error"!==(i=t.sent).msg.status?a.default.createAlert("success",i.msg.msg,3e3,"clicked"):a.default.createAlert("error",i.msg.msg,3e3,"clicked"),n.target.innerHTML="<i class='fas fa-sync'></i>",n.target.disabled=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{"../../functions/ui":5,"../../octofarm":18,"../../octoprint":19,"../powerButton.js":13}],8:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[]}var t,n,a;return t=e,(n=[{key:"add",value:function(e){e.active=!1,this.data.push(e)}},{key:"remove",value:function(){this.data.shift()}},{key:"first",value:function(){return this.data[0]}},{key:"activate",value:function(e){this.data[e].active=!0}},{key:"size",value:function(){return this.data.length}},{key:"all",value:function(){var e=this,t=[];return this.data.forEach((function(n,r){t.push(e.data[r])})),t}}])&&r(t.prototype,n),a&&r(t,a),e}();n.default=a},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(s=n,0===e.length){document.querySelectorAll("[id^='currentOpCard-']").forEach((function(e){e.remove()}))}t=t,document.getElementById("completeCount").innerHTML="Complete: "+t.complete,document.getElementById("idleCount").innerHTML="Idle: "+t.idle,document.getElementById("activeCount").innerHTML="Active: "+t.active,document.getElementById("disconCount").innerHTML="Disconnected: "+t.disconnected,document.getElementById("offlineCount").innerHTML="Offline: "+t.offline,document.getElementById("farmProgress").innerHTML=t.farmProgress+"%",document.getElementById("farmProgress").style="width: ".concat(t.farmProgress,"%"),document.getElementById("farmProgress").classList="progress-bar progress-bar-striped bg-".concat(t.farmProgressColour),(e=_.orderBy(e,["progress"],["desc"])).forEach((function(t,n){var a=new Date;a=a.getTime();var i=new Date(a+1e3*t.timeRemaining).toDateString(),s=new Date(a+1e3*t.timeRemaining).toTimeString(),d=i+": "+(s=s.substring(0,8)),u="<button id='currentHarvest-".concat(t.index,"' type='button' title=\"Clear your finished print from current operations\" class='tag btn btn-success btn-sm mt-0 pt-0 pb-0'>Print Harvested?</button>"),p="<button id='restartCurrentPrint-".concat(t.index,"' type='button' title=\"Restart your current selected print\" class='tag btn btn-warning btn-sm mt-0 pt-0 pb-0'>Restart Print</button>"),m=null;if(void 0!==o(t.fileName)&&(m=t.fileName.replace(".gcode","")).length>15&&m.substring(0,16),document.getElementById("currentOpCard-"+t.index)){100===t.progress?(document.getElementById("finishedPrint-"+t.index).classList.remove("d-none"),document.getElementById("futureDate-"+t.index).classList.add("d-none"),document.getElementById("currentRestart-"+t.index).classList.remove("d-none"),document.getElementById("currentTime-"+t.index).classList.add("d-none"),document.getElementById("currentProgressMain-"+t.index).classList.add("d-none")):(document.getElementById("finishedPrint-"+t.index).classList.add("d-none"),document.getElementById("futureDate-"+t.index).classList.remove("d-none"),document.getElementById("currentRestart-"+t.index).classList.add("d-none"),document.getElementById("currentTime-"+t.index).classList.remove("d-none"),document.getElementById("currentProgressMain-"+t.index).classList.remove("d-none"));var f=document.getElementById("currentProgress-"+t.index);document.getElementById("currentTime-"+t.index).innerHTML=r.default.generateTime(t.timeRemaining),f.style="width: ".concat(t.progress,"%"),f.innerHTML=t.progress+"%",f.className="progress-bar progress-bar-striped bg-".concat(t.progressColour)}else document.getElementById("currentOperationsBody").insertAdjacentHTML("beforeend",'\n                <div id="currentOpCard-'.concat(t.index,'"\n                class="card card-block text-white bg-secondary d-inline-block"\n                style="min-width: 200px; max-width: 200px;"\n              >\n                  <div class="card-header pb-1 pt-1 pl-2 pr-2">\n                     ').concat(t.name,'</div>\n                  <div class="card-body  pb-0 pt-2 pl-2 pr-2">\n                  <h6 id="currentFile-').concat(t.index,'" class="pb-0 text-center" style="font-size:0.6rem;"> ').concat(m,' </h6>\n                  <h6 id="currentRestart-').concat(t.index,'" class="pb-0 text-center d-none" style="font-size:0.6rem;">').concat(p,'</h6>\n                  <h6 id="currentTime-').concat(t.index,'" class="pb-0 text-center" style="font-size:0.6rem;">').concat(r.default.generateTime(t.timeRemaining),'</h6>\n        <h6 id="futureDate-').concat(t.index,'" class="pb-0 text-center" style="font-size:0.6rem;"> ').concat(d,' </h6>\n        <h6 id="finishedPrint-').concat(t.index,'" class="pb-0 text-center d-none" style="font-size:0.6rem;"> ').concat(u,' </h6>\n                    <div id="currentProgressMain-').concat(t.index,'" class="progress">\n                      <div id="currentProgress-').concat(t.index,'"\n                        class="progress-bar progress-bar-striped bg-').concat(t.progressColour,'"\n                        role="progressbar"\n                        style="width: ').concat(t.progress,'%"\n                        aria-valuenow="').concat(t.progress,'"\n                        aria-valuemin="0"\n                        aria-valuemax="100"\n                      >\n                      ').concat(t.progress,"%\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                ")),document.getElementById("currentHarvest-"+t.index).addEventListener("click",(function(e){var n=document.getElementById("currentHarvest-"+t.index).id.split("-");c(n[1])})),document.getElementById("restartCurrentPrint-"+t.index).addEventListener("click",(function(e){var n=document.getElementById("restartCurrentPrint-"+t.index).id.split("-");l(n[1])}));document.getElementById("currentOpCard-"+t.index).style.order=n;var b=document.querySelectorAll("[id^='currentOpCard-']"),g=[];e.forEach((function(e){g.push(e.index)}));var v=[];b.forEach((function(e){var t=e.id.split("-");v.push(t[1])})),_.difference(v,g).forEach((function(e){document.getElementById("currentOpCard-"+e).remove()}))}))};var r=i(e("../functions/calc.js")),a=i(e("../octoprint.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=[],c=function(e){var t=_.findIndex(s,(function(t){return t._id==e}));a.default.file(s[t],s[t].currentJob.filePath,"load")},l=function(e){var t=_.findIndex(s,(function(t){return t._id==e}));a.default.file(s[t],s[t].currentJob.filePath,"print")};document.querySelectorAll("[id^='currentHarvest-']").forEach((function(e){e.addEventListener("click",(function(t){var n=e.id.split("-");c(n[1])}))})),document.querySelectorAll("[id^='restartCurrentPrint-']").forEach((function(e){e.addEventListener("click",(function(t){var n=e.id.split("-");l(n[1])}))}))},{"../functions/calc.js":2,"../octoprint.js":19}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkFilamentManager=function(){return s.apply(this,arguments)},n.returnDropDown=function(e){return c.apply(this,arguments)},n.selectFilament=function(e,t,n){return l.apply(this,arguments)};var r,a=(r=e("../octofarm.js"))&&r.__esModule?r:{default:r};function i(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function s(){return(s=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.get("settings/server/get");case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t.filamentManager);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.get("filament/get/dropDownList");case 2:return n=e.sent,e.next=5,n.json();case 5:if(n=e.sent,!t){e.next=10;break}return e.abrupt("return",n.selected.historyDropDown);case 10:return e.abrupt("return",n.selected.normalDropDown);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=o(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={tool:r,printerId:t,spoolId:n},e.next=3,a.default.post("filament/select",i);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{"../octofarm.js":18}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FileActions=n.default=void 0;var r=u(e("../octofarm.js")),a=u(e("../octoprint.js")),i=u(e("./clientQueue.js")),o=u(e("../functions/calc.js")),s=u(e("../functions/ui.js")),c=e("../functions/dragAndDrop.js"),l=u(e("./fileSorting.js")),d=u(e("./printerSelect.js"));function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function v(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,s,"next",e)}function s(e){v(i,r,a,o,s,"throw",e)}o(void 0)}))}}var h=new i.default;setInterval(y(regeneratorRuntime.mark((function e(){var t,n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h.size()>0)){e.next=20;break}if((t=h.first()).active){e.next=20;break}return h.activate(0),n=new Date,e.next=7,t.upload(t);case 7:return a=e.sent,(a=JSON.parse(a)).index=t.index,a.uploadDate=n.getTime()/1e3,e.next=13,r.default.post("printers/newFiles",a);case 13:return e.sent,e.next=16,w.drawFile(a);case 16:e.sent,h.remove(),(i=document.getElementById("fileCounts-".concat(t.index)))&&1==i.innerHTML&&(i.innerHTML=" ".concat(0));case 20:(o=h.all()).forEach((function(e){var t=o.reduce((function(t,n){return t+(n.index==e.index)}),0),n=document.getElementById("fileCounts-".concat(e.index));n&&(n.innerHTML=" ".concat(t))}));case 22:case"end":return e.stop()}}),e)}))),1e3);var w=function(){function e(){f(this,e)}var t,n,a,i,u,m;return g(e,null,[{key:"handleFiles",value:(m=y(regeneratorRuntime.mark((function t(n,r,a){var i,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=p(n),i=0;i<n.length;i++)o={},(s=document.getElementById("fileUploadCountSpinner"))&&(s.classList.contains("fa-spin")||(s.classList="fas fa-spinner fa-spin")),o.file=n[i],void 0!==a&&(o.print=!0),o.index=r._id,o.printerInfo=r,c=document.getElementById("currentFolder"),o.currentFolder=c?c.innerHTML:"local/",o.upload=e.fileUpload,h.add(o);case 2:case"end":return t.stop()}}),t)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"createUpload",value:function(e,t,n,r){var a=h.size(),i=document.getElementById("fileUploadCount");if(i&&(i.innerHTML="File Queue: ".concat(a),a<1)){i.innerHTML="File Queue: 0";var o=document.getElementById("fileUploadCountSpinner");o.classList.contains("fa-spin")&&(o.classList="fas fa-spinner")}var s=document.getElementById("fileProgress-".concat(e));if(s){s.classList="progress-bar progress-bar-striped bg-warning";var c=n/r*100;isNaN(c)&&(c=0),s.innerHTML="".concat(Math.floor(c),"%"),s.style.width="".concat(c,"%"),100==c&&(s.classList="progress-bar progress-bar-striped bg-success")}}},{key:"fileUpload",value:function(t){return new Promise((function(n,a){var i=t.currentFolder,o=t.index,c=t.printerInfo,l=new FormData,d="";i.includes("local/")&&(d=i.replace("local/","")),l.append("file",t.file),l.append("path",d),t.print&&l.append("print",!0);var u="".concat(c.printerURL,"/api/files/local"),p=new XMLHttpRequest;t=t.file,p.open("POST",u),p.upload.onprogress=function(n){n.lengthComputable&&e.createUpload(c._id,t.name,n.loaded,n.total)},p.setRequestHeader("X-Api-Key",c.apikey),p.onloadstart=function(n){e.createUpload(c._id,t.name,n.loaded,n.total)},p.onloadend=function(){var a=y(regeneratorRuntime.mark((function a(i){var l,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l='<i class="fas fa-spinner fa-pulse"></i> Checking Octoprint for information... <br>',e.createUpload(c._id,t.name,i.loaded,i.total),setTimeout((function(){e.createUpload(c._id,t.name,i.loaded,i.total)}),5e3),this.status>=200&&this.status<300?(n(p.response),s.default.createAlert("success","".concat(t.name," has finished uploading to Printer: ").concat(c.printerName),3e3,"clicked"),setTimeout(y(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("printers/printerInfo",{i:c._id});case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,e.refreshFiles(n,l),setTimeout(y(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("printers/printerInfo",{i:c._id});case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,e.refreshFiles(n,l),setTimeout(y(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("printers/printerInfo",{i:c._id});case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,e.refreshFiles(n,"");case 7:case"end":return t.stop()}}),t)}))),5e3);case 8:case"end":return t.stop()}}),t)}))),5e3);case 8:case"end":return t.stop()}}),t)}))),5500)):(h.remove(),(d=document.getElementById("fileCounts-".concat(o)))&&1==d.innerHTML&&(d.innerHTML=" ".concat(0)),n(p.response),s.default.createAlert("error","Sorry but ".concat(t.name," could not be uploaded... is CORS enabled and OctoPrint online?"),3e3,"clicked"));case 4:case"end":return a.stop()}}),a,this)})));return function(e){return a.apply(this,arguments)}}(),p.onerror=function(){n(p.response),s.default.createAlert("error","Sorry but ".concat(t.name," could not be uploaded... is CORS enabled and OctoPrint online?"),3e3,"")},t.name.includes(".gcode")?p.send(l):s.default.createAlert("error","Sorry but ".concat(t.name," is not a gcode file, could not be uploading."),3e3,"")}))}},{key:"actionBtnGate",value:function(e,t){var n=t.split("*"),r=n[1],a=n[2];"fileActionStart"===r?x.startPrint(e,a):"fileActionSelect"===r?x.selectFile(e,a):"fileActionUpdate"===r?x.updateFile(e,t,a):"fileActionMove"===r?x.moveFile(e,a):"fileActionDownload"===r||("fileActionDelete"===r?x.deleteFile(e,a):"folderActionMove"===r?x.moveFolder(e,a):"folderActionDelete"===r&&x.deleteFolder(e,a))}},{key:"reSyncFiles",value:(u=y(regeneratorRuntime.mark((function t(n,a){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.target.innerHTML="<i class='fas fa-sync fa-spin'></i> Re-Syncing...",t.next=3,r.default.post("printers/resyncFile",{i:a._id});case 3:return i=t.sent,t.next=6,i.json();case 6:t.sent,o=function(){n.target.classList="btn btn-primary mb-0",n.target.innerHTML="<i class='fas fa-sync'></i> Re-Sync"},n.target.classList="btn btn-primary mb-0",n.target.innerHTML="<i class='fas fa-sync'></i> Re-Sync",setTimeout(o,500),e.updateFileList(a._id);case 10:case"end":return t.stop()}}),t)}))),function(e,t){return u.apply(this,arguments)})},{key:"updateFileList",value:(i=y(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.post("printers/printerInfo",{i:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return n=e.sent,l.default.loadSort(n),e.abrupt("return","done");case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"openFolder",value:function(t,n,r){if(void 0===n||"button"!==n.type)if(void 0!==t)t=t.replace("file-",""),document.getElementById("currentFolder").innerHTML="local/".concat(t),e.updateFileList(r._id);else{var a=document.getElementById("currentFolder").innerHTML;if("local"!=a){var i=a.substring(0,a.lastIndexOf("/"));document.getElementById("currentFolder").innerHTML=i,e.updateFileList(r._id)}}}},{key:"drawFile",value:(a=y(regeneratorRuntime.mark((function t(n){var a,i,o,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=document.getElementById("fileList-".concat(n.index)),i=new Date(1e3*n.uploadDate),o=i.toDateString(),s=i.toTimeString().substring(0,8),i="".concat(o," ").concat(s),c=' <div\n            id="file-'.concat(n.files.local.path,'"\n            href="#"\n          class="list-group-item list-group-item-action flex-column align-items-start bg-secondary"\n            style="display: block;\n            padding: 0.7rem 0.1rem;"\n            >\n            <div class="row">\n                <div\n                id="fileThumbnail-').concat(n.files.local.path,'"\n          class="col-lg-2"\n            style="display:flex; justify-content:center; align-items:center;"\n                >\n                <center><i class="fas fa-file-code fa-2x"></i></center>\n                </div>\n                <div class="col-lg-10">\n                <div class="row">\n                <div class="col-12">\n                <h5 class="mb-1 name">').concat(n.files.local.name.replace("/_/g"," "),'</h5>         \n                </div>\n                </div>\n                <div class="row">\n                <div class="col-12">\n                <p class="mb-1 float-right">\n                  <span title="File specific success / failure rate from OctoPrint" id="fileHistoryRate-').concat(n.files.local.path,'"><i class="fas fa-thumbs-up"></i> <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> / <i class="fas fa-thumbs-down"></i> <i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span><br>\n                <i class="fas fa-stopwatch"></i> \n                <span class="time" id="fileTime-').concat(n.files.local.path,'">\n                <i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span> <br> \n                <i class="fas fa-dollar-sign"></i> \n                <span title="Expected Printer Cost" class="cost" id="fileCost-').concat(n.files.local.path,'">  <i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span>  </span>    <br> \n            <span title="Expected Filament Cost" > </span>\n\n                </p>\n                <p class="mb-1 float-left">\n                <i class="fas fa-clock"></i><span id="fileDateClean-').concat(n.files.local.path,'" class="date d-none"> ').concat(n.uploadDate,'</span><span id="fileDate-').concat(n.files.local.path,'"> ').concat(i,'</span><br>\n                <i class="fas fa-hdd"></i><span class="size" id="fileSize-').concat(n.files.local.path,'">  <i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span> </span> <br>\n            <span class="usage" title="Expected Filament Usage/Cost" id="fileTool-').concat(n.files.local.path,'">  <i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span>  </span>\n                </p> \n                </div>\n                </div>\n                </div>\n                <div class="col-lg-12">\n                <div\n          class="d-flex btn-group flex-wrap btn-group-sm"\n            role="group"\n            aria-label="Basic example"\n                >\n                <button\n            title="Re-Sync File"\n            id="').concat(n.index,"*fileActionUpdate*").concat(n.files.local.path,'"\n            role="button"\n          class="btn btn-dark"\n                >\n                <i class="fas fa-sync"></i> Re-Sync\n                </button>\n                <button           title="Start printing file"\n            id="').concat(n.index,"*fileActionStart*").concat(n.files.local.path,'" type="button" class="btn btn-success">\n          <i class="fas fa-play"></i> Start\n              </button>\n              <button  title="Select file" id="').concat(n.index,"*fileActionSelect*").concat(n.files.local.path,'" type="button" class="btn btn-info">\n        <i class="fas fa-file-upload"></i> Select\n            </button>\n            <button          title="Move file" id="').concat(n.index,"*fileActionMove*").concat(n.files.local.path,'" type="button" class="btn btn-warning">\n      <i class="fas fa-people-carry"></i> Move\n          </button>\n          <button          title="Download file" onclick="window.open(\'').concat(n.files.local.refs.download,'\')" type="button" class="btn btn-dark">\n    <i class="fas fa-download"></i> Download\n        </button>\n        <button title="Delete file" id="').concat(n.index,"*fileActionDelete*").concat(n.files.local.path,'" type="button" class="btn btn-danger">\n  <i class="fas fa-trash-alt"></i> Delete\n      </button>\n      </div>\n      </div>\n      </div>\n      </div>\n      </div>'),a.insertAdjacentHTML("afterbegin",c),t.next=10,r.default.post("printers/printerInfo",{i:n.index});case 10:return l=t.sent,t.next=13,l.json();case 13:l=t.sent,document.querySelectorAll("[id*='*fileAction']").forEach((function(t){t.id.includes(l._id)&&t.addEventListener("click",function(){var n=y(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.actionBtnGate(l,t.id);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])}))),function(e){return a.apply(this,arguments)})},{key:"refreshFiles",value:(n=y(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=function(e){var r=t.fileList.fileList[e],a=document.getElementById("currentFolder").innerHTML;if(a.includes("local/")&&(a=a.replace("local/","")),r.path===a&&document.getElementById("file-".concat(r.fullPath))){var i="";r.toolUnits.forEach((function(e,t){i+='<i class="fas fa-weight"></i> '.concat(e,' / <i class="fas fa-dollar-sign"></i> Cost: ').concat(r.toolCosts[t],"<br>")}));var s='<center><i class="fas fa-file-code fa-2x"></i></center>';void 0!==r.thumbnail&&null!==r.thumbnail&&(s="<center><img src='".concat(t.printerURL,"/").concat(r.thumbnail,'\' width="100%"></center>'));var c=new Date(1e3*r.uploadDate),l=c.toDateString(),d=c.toTimeString().substring(0,8);c="".concat(l," ").concat(d),document.getElementById("fileHistoryRate-"+r.fullPath).innerHTML=n+'<i class="fas fa-thumbs-up"></i> 0 / <i class="fas fa-thumbs-down"></i> 0',document.getElementById("fileDate-".concat(r.fullPath)).innerHTML=" ".concat(c),document.getElementById("fileSize-".concat(r.fullPath)).innerHTML=" ".concat(o.default.bytes(r.fileSize)),document.getElementById("fileTool-".concat(r.fullPath)).innerHTML=" ".concat(i),document.getElementById("fileTime-".concat(r.fullPath)).innerHTML=" ".concat(o.default.generateTime(r.expectedPrintTime)),document.getElementById("fileCost-".concat(r.fullPath)).innerHTML=" "+"Print Cost: ".concat(r.printCost),document.getElementById("fileThumbnail-".concat(r.fullPath)).innerHTML=" ".concat(s),document.getElementById("fileDateClean-".concat(r.fullPath)).innerHTML=r.uploadDate}},a=0;a<t.fileList.fileList.length;a++)r(a);case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"drawFiles",value:function(t,n){try{var r=document.getElementById("fileList-".concat(t._id));if(r){var a=t.fileList;if("danger"===t.systemChecks.cleaning.file.status)r.innerHTML='\n            <div class="noStorage  text-center"><i class="fas fa-file-code fa-5x"></i><br><h5>There are no files in local storage...</h5></div>\n      ';else{r.innerHTML="";var i=document.getElementById("currentFolder").innerHTML;i.includes("local/")&&(i=i.replace("local/","")),a.folderList.length>0&&a.folderList.forEach((function(e){e.path==i&&r.insertAdjacentHTML("beforeend",'<a\n              id="file-'.concat(e.name,'"\n              href="#"\n              class="list-group-item list-group-item-action flex-column align-items-start bg-dark folderAction"\n              style="display: block;\n                padding: 0.7rem 0.1rem;"\n            >\n              <div class="row">\n                <div\n                  class="col-lg-1"\n                  style="display:flex; justify-content:center; align-items:center;"\n                >\n                  <center><i class="fas fa-folder fa-2x"></i></center>\n                </div>\n                <div class="col-lg-11">\n                  <small class="float-right"\n                    >\x3c!--Display file and folder count here eventually--\x3e</small\n                  >\n                  <div class="d-flex w-100 justify-content-between">\n                    <h5 class="mb-1 float-left">\n                      ').concat(e.display,'\n                    </h5>\n                    <div\n                      class="float-right btn-group flex-wrap btn-group-sm"\n                      role="group"\n                      aria-label="Basic example"\n                    >\n                      <button id="').concat(t._id,"*folderActionMove*").concat(e.name,'" type="button" class="btn btn-warning">\n                        <i class="fas fa-people-carry"></i> Move\n                      </button>\n                      <button id="').concat(t._id,"*folderActionDelete*").concat(e.name,'" type="button" class="btn btn-danger">\n                        <i class="fas fa-trash-alt"></i> Delete\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </a>\n         \n            '))})),a.fileList.length>0&&a.fileList.forEach((function(e){var a="";e.toolUnits.forEach((function(t,n){a+='<i class="fas fa-weight"></i> '.concat(t,' / <i class="fas fa-dollar-sign"></i> Cost: ').concat(e.toolCosts[n],"<br>")}));var s='<center><i class="fas fa-file-code fa-2x"></i></center>';void 0!==e.thumbnail&&null!==e.thumbnail&&(s="<center><img src='".concat(t.printerURL,"/").concat(e.thumbnail,'\' width="100%"></center>'));var c=new Date(1e3*e.uploadDate),l=c.toDateString(),d=c.toTimeString().substring(0,8),u="bg-secondary";!0===e.last?u="bg-dark-success":!1===e.last&&(u="bg-dark-failed"),c="".concat(l," ").concat(d);var p=' <div\n            id="file-'.concat(e.fullPath,'"\n            href="#"\n          class="list-group-item list-group-item-action flex-column align-items-start ').concat(u,'"\n            style="display: block;\n            padding: 0.7rem 0.1rem;"\n            >\n            <div class="row">\n                <div\n                            id="fileThumbnail-').concat(e.fullPath,'"\n          class="col-lg-2"\n            style="display:flex; justify-content:center; align-items:center;"\n                >\n                ').concat(s,'\n                </div>\n                <div class="col-lg-10">\n                <div class="row">\n                <div class="col-12">\n                <h5 class="mb-1 name">').concat(e.display,'</h5>         \n                </div>\n                </div>\n                <div class="row">\n                <div class="col-12">\n                <p class="mb-1 float-right">\n                <span title="File specific success / failure rate from OctoPrint" id="fileHistoryRate-').concat(e.fullPath,'"><i class="fas fa-thumbs-up"></i> ').concat(e.success,' / <i class="fas fa-thumbs-down"></i> ').concat(e.failed,'</span><br>\n                <i class="fas fa-stopwatch"></i> \n                <span class="time" id="fileTime-').concat(e.fullPath,'">\n                    ').concat(o.default.generateTime(e.expectedPrintTime),'</span> <br> \n                <i class="fas fa-dollar-sign"></i> \n                <span title="Expected Printer Cost" class="cost" id="fileCost-').concat(e.fullPath,'"> Print Cost: ').concat(e.printCost,' </span>    <br> \n            <span title="Expected Filament Cost"> </span>\n\n                </p>\n                <p class="mb-1 float-left">\n                <i class="fas fa-clock"></i><span id="fileDateClean-').concat(e.fullPath,'" class="date d-none"> ').concat(e.uploadDate,'</span><span id="fileDate-').concat(e.fullPath,'"> ').concat(c,'</span><br>\n                <i class="fas fa-hdd"></i><span class="size" id="fileSize-').concat(e.fullPath,'"> ').concat(o.default.bytes(e.fileSize),'</span> <br>\n            <span class="usage" title="Expected Filament Usage/Cost" id="fileTool-').concat(e.fullPath,'"> ').concat(a,' </span>\n\n                </p> \n                </div>\n                </div>\n                </div>\n                <div class="col-lg-12">\n                <div\n          class="d-flex btn-group flex-wrap btn-group-sm"\n            role="group"\n            aria-label="Basic example"\n                >\n                <button\n            title="Re-Sync File"\n            id="').concat(t._id,"*fileActionUpdate*").concat(e.fullPath,'"\n            role="button"\n          class="btn btn-dark"\n                >\n                <i class="fas fa-sync"></i> Re-Sync\n                </button>\n                <button           title="Start printing file"\n            id="').concat(t._id,"*fileActionStart*").concat(e.fullPath,'" type="button" class="btn btn-success">\n          <i class="fas fa-play"></i> Start\n              </button>\n              <button  title="Select file" id="').concat(t._id,"*fileActionSelect*").concat(e.fullPath,'" type="button" class="btn btn-info">\n        <i class="fas fa-file-upload"></i> Select\n            </button>\n            <button          title="Move file" id="').concat(t._id,"*fileActionMove*").concat(e.fullPath,'" type="button" class="btn btn-warning">\n      <i class="fas fa-people-carry"></i> Move\n          </button>\n          <button          title="Download file" onclick="window.open(\'').concat(t.printerURL,"/downloads/files/local/").concat(e.fullPath,'\')" type="button" class="btn btn-dark">\n    <i class="fas fa-download"></i> Download\n        </button>\n        <button title="Delete file" id="').concat(t.printerURL,"*fileActionDelete*").concat(e.fullPath,'" type="button" class="btn btn-danger">\n  <i class="fas fa-trash-alt"></i> Delete\n      </button>\n      </div>\n      </div>\n      </div>\n      </div>\n      </div>');(void 0!==n||e.path==i)&&r.insertAdjacentHTML("beforeend",p)})),e.updateListeners(t)}}}catch(e){console.log(e)}}},{key:"search",value:function(e){x.search(e)}},{key:"createFolder",value:function(e){x.createFolder(e)}},{key:"updateListeners",value:function(t){var n=document.getElementById("fileList-".concat(t._id));(0,c.dragAndDropEnable)(n,t),document.querySelectorAll(".folderAction").forEach((function(n){n.addEventListener("click",(function(r){e.openFolder(n.id,r.target,t)}))})),document.querySelectorAll("[id*='*fileAction']").forEach((function(n){n.addEventListener("click",(function(r){e.actionBtnGate(t,n.id)}))})),document.querySelectorAll("[id*='*folderAction']").forEach((function(n){n.addEventListener("click",(function(r){e.actionBtnGate(t,n.id)}))}))}},{key:"multiUpload",value:(t=y(regeneratorRuntime.mark((function t(){var n,a,i,o,c,l,u,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m=function(e){e=p(e),o=e;var t=document.getElementById("multiFileSelectedNow");t.innerHTML="",o.forEach((function(e){t.insertAdjacentHTML("beforeend","\n          <li>".concat(e.name,"</li>\n        "))}))},u=function(){""==a&&(a="local"),n.forEach((function(t){var n=document.getElementById("fileUploadCountSpinner");n.classList.contains("fa-spin")||(n.classList="fas fa-spinner fa-spin"),o.forEach((function(n){var r={},o=t.value;r.file=n,r.index=o,r.printerInfo=t.printerInfo,r.upload=e.fileUpload,r.currentFolder=a,console.log(i),i&&(r.print=!0),h.add(r)}))}))},l=function(){return(l=y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=d.default.getSelected()).length<2)){e.next=4;break}return s.default.createAlert("error","Please select MORE than ".concat(n.length," printer(s)!"),2e3,"clicked"),e.abrupt("return");case 4:return document.getElementById("multiPrinterBtn").disabled=!0,document.getElementById("multiFolder").disabled=!1,document.getElementById("multiPrintersSection").classList.add("hidden"),document.getElementById("multiFolderSection").classList.remove("hidden"),document.getElementById("multiUploadFooter").innerHTML='<button id="multiUpSubmitBtn" type="button" class="btn btn-warning float-right">Next</button>',document.getElementById("multiUpSubmitBtn").addEventListener("click",(function(e){c()})),document.getElementById("multiSelectedPrinters2").innerHTML="",e.next=13,r.default.post("printers/printerInfo",{i:null});case 13:return t=e.sent,e.next=16,t.json();case 16:t=e.sent,n.forEach((function(e,r){if(e){var a=_.findIndex(t,(function(t){return t._id==e.value.toString()})),i=t[a].printerName;document.getElementById("multiSelectedPrinters2").insertAdjacentHTML("beforeend",'\n            [<span class="MultiSelected">'.concat(i,"</span>]\n            ")),n[r]={value:t[a]._id,printerInfo:t[a]}}})),document.getElementById("multiFolder").disabled=!0,document.getElementById("multiFile").disabled=!1,document.getElementById("multiFileSection").classList.remove("hidden"),document.getElementById("multiFolderSection").classList.add("hidden"),document.getElementById("multiUploadFooter").innerHTML='<button id="multiUpSubmitBtn" type="button" class="btn btn-success float-right" data-dismiss="modal">Start!</button>',document.getElementById("multiUpSubmitBtn").addEventListener("click",(function(e){u()})),""!=(a=document.getElementById("multiNewFolder").value)&&(a+=""),document.getElementById("printOnLoadBtn").addEventListener("click",(function(e){var t;t=e.target.checked;var n=document.getElementById("multiFileUploadBtn"),r=document.getElementById("multiFileUploadBtnLabel");t?(n.removeAttribute("multiple",""),n.setAttribute("single",""),r.innerHTML='<i class="fas fa-file-import"></i> Upload File',i=!0):(n.setAttribute("multiple",""),n.removeAttribute("single",""),r.innerHTML='<i class="fas fa-file-import"></i> Upload Files',i=!1)})),document.getElementById("multiFileUploadBtn").addEventListener("change",(function(){m(this.files)}));case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return l.apply(this,arguments)},n=null,a="",i=!1,o=null,d.default.create(document.getElementById("multiPrintersSection")),document.getElementById("multiFileSelectedNow").innerHTML="",document.getElementById("multiPrinterBtn").disabled=!1,document.getElementById("multiFolder").disabled=!0,document.getElementById("multiFile").disabled=!0,document.getElementById("multiPrintersSection").classList.remove("hidden"),document.getElementById("multiFolderSection").classList.add("hidden"),document.getElementById("multiFileSection").classList.add("hidden"),document.getElementById("multiUploadFooter").innerHTML='<button id="multiUpSubmitBtn" type="button" class="btn btn-warning float-right">Next</button>',document.getElementById("multiUpSubmitBtn").addEventListener("click",(function(e){c()}));case 20:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}]),e}();n.default=w;var x=function(){function e(){f(this,e)}var t,n,i,o;return g(e,null,[{key:"search",value:(o=y(regeneratorRuntime.mark((function e(t){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.post("printers/printerInfo",{i:t});case 2:return n=e.sent,e.next=5,n.json();case 5:for(n=e.sent,a=document.getElementById("fileList-".concat(t)),(i=(i=document.getElementById("searchFiles").value.toUpperCase()).replace(/ /g,"_")).value,document.getElementById("currentFolder").value="local",l.default.loadSort(n),o=a.querySelectorAll('*[id^="file-"]'),s=0;s<o.length;s++)o[s].id.replace("file-","").toUpperCase().indexOf(i)>-1?o[s].style.display="":o[s].style.display="none";case 12:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"createFolder",value:(i=y(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("currentFolder").innerHTML,i=new FormData,"local"===n?n="":n.includes("local/")&&(n=n.replace("local/","")),bootbox.prompt("What would you like to name your folder?",function(){var e=y(regeneratorRuntime.mark((function e(o){var c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=16;break}return i.append("foldername",o),i.append("path","".concat(n,"/")),e.next=5,a.default.folder(t,"local",i);case 5:if(201!==(c=e.sent).status&&200!==c.status){e.next=15;break}return l={i:t._id,foldername:o,path:n},e.next=10,r.default.post("printers/newFolder",l);case 10:e.sent,s.default.createAlert("success","Successfully created your new folder...",3e3,"clicked"),w.updateFileList(t._id),e.next=16;break;case 15:s.default.createAlert("error","Sorry your folder couldn't be saved...",3e3,"clicked");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"grabUsage",value:function(e){if(void 0===e.length)return null===e.length||e.length.length,"No Length";var t={totalLength:[],totalGrams:[],usage:[]};return e.length.forEach((function(e){var n=parseFloat(1.75)/2,r=e/1e3*Math.PI*n*n*parseFloat(1.24);t.totalLength.push(e/1e3),t.totalGrams.push(r),t.usage.push("".concat((e/1e3).toFixed(2),"m / ").concat(r.toFixed(2),"g"))})),t.totalLength=t.totalLength.reduce((function(e,t){return e+t}),0),t.totalGrams=t.totalGrams.reduce((function(e,t){return e+t}),0),t}},{key:"startPrint",value:(n=y(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.file(t,n,"print");case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"selectFile",value:function(e,t){a.default.file(e,t,"load")}},{key:"updateFile",value:(t=y(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=document.getElementById(n)).innerHTML='<i class="fas fa-sync fa-spin"></i> Refreshing...',e.next=5,r.default.post("printers/resyncFile",{i:t._id,fullPath:a});case 5:return o=e.sent,e.next=8,o.json();case 8:s=e.sent,w.updateFileList(t._id),i.innerHTML='<i class="fas fa-sync"></i> Refresh',c=function(){i.classList="btn btn-dark"},s?(i.classList="btn btn-sm btn-success",setTimeout(c,500)):(i.classList="btn btn-sm btn-danger",setTimeout(c,500));case 13:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"moveFile",value:function(e,t){var n=[];n.push({text:"local",value:"/"}),e.fileList.folderList.forEach((function(e){var t={text:e.name,value:e.name};n.push(t)})),bootbox.prompt({title:"Where would you like to move the file?",inputType:"select",inputOptions:n,callback:function(n){return y(regeneratorRuntime.mark((function i(){var o,c,l,d;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n){i.next=22;break}return o={command:"move",destination:n},i.next=4,a.default.post(e,"files/local/".concat(t),o);case 4:if(404!==(c=i.sent).status){i.next=9;break}s.default.createAlert("error","We could not find the location, does it exist?",3e3,"clicked"),i.next=22;break;case 9:if(409!==c.status){i.next=13;break}s.default.createAlert("error","There was a conflict, file already exists or is in use...",3e3,"clicked"),i.next=22;break;case 13:return i.next=15,c.json();case 15:return l=i.sent,d={index:e._id,newPath:n,fileName:l.name,newFullPath:l.path},s.default.createAlert("warning","Moving file... please wait.",3e3,"clicked"),i.next=20,r.default.post("printers/moveFile",d);case 20:i.sent,setTimeout((function(){w.updateFileList(e._id),s.default.createAlert("success","Successfully moved your file...",3e3,"clicked")}),3e3);case 22:case"end":return i.stop()}}),i)})))()}})}},{key:"deleteFile",value:function(e,t){bootbox.confirm({message:"Are you sure you want to delete ".concat(t,"?"),buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-check"></i> Confirm'}},callback:function(n){return y(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=4;break}return r.next=3,a.default.file(e,t,"delete");case 3:document.getElementById("file-".concat(t)).remove();case 4:case"end":return r.stop()}}),r)})))()}})}},{key:"deleteFolder",value:function(e,t){bootbox.confirm({message:"Are you sure you want to delete ".concat(t,"?"),buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-check"></i> Confirm'}},callback:function(n){return y(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o={index:e._id,fullPath:t},!n){i.next=9;break}return i.next=4,a.default.delete(e,"files/local/".concat(t));case 4:return i.sent,i.next=7,r.default.post("printers/removefolder",o);case 7:i.sent,document.getElementById("file-".concat(t)).remove();case 9:case"end":return i.stop()}}),i)})))()}})}},{key:"moveFolder",value:function(e,t){var n=[];n.push({text:"local",value:"/"}),e.fileList.folderList.forEach((function(e){var t={text:e.name,value:e.name};n.push(t)})),bootbox.prompt({title:"Where would you like to move the file?",inputType:"select",inputOptions:n,callback:function(n){return y(regeneratorRuntime.mark((function i(){var o,c,l,d;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n){i.next=22;break}return o={command:"move",destination:n},i.next=4,a.default.post(e,"files/local/".concat(t),o);case 4:if(404!==(c=i.sent).status){i.next=9;break}s.default.createAlert("error","We could not find the location, does it exist?",3e3,"clicked"),i.next=22;break;case 9:if(409!==c.status){i.next=13;break}s.default.createAlert("error","There was a conflict, file already exists or is in use...",3e3,"clicked"),i.next=22;break;case 13:return i.next=15,c.json();case 15:return l=i.sent,d={index:e._id,oldFolder:t,newFullPath:n,folderName:l.path},s.default.createAlert("warning","Moving folder please wait...",3e3,"clicked"),i.next=20,r.default.post("printers/moveFolder",d);case 20:i.sent,setTimeout((function(){w.updateFileList(e._id),s.default.createAlert("success","Successfully moved your file...",3e3,"clicked")}),3e3);case 22:case"end":return i.stop()}}),i)})))()}})}}]),e}();n.FileActions=x},{"../functions/calc.js":2,"../functions/dragAndDrop.js":3,"../functions/ui.js":5,"../octofarm.js":18,"../octoprint.js":19,"./clientQueue.js":8,"./fileSorting.js":12,"./printerSelect.js":15}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./fileManager.js"))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"saveSort",value:function(e,t){localStorage.setItem("fileSort",JSON.stringify({meta:e,reverse:t}))}},{key:"loadSort",value:function(e){var t=JSON.parse(localStorage.getItem("fileSort"));if(null!==t){var n=t.reverse;"file"===t.meta&&this.sortFileName(e,n),"date"===t.meta&&this.sortUploadDate(e,n),"time"===t.meta&&this.sortPrintTime(e,n)}else this.sortUploadDate(e,!0);this.setListeners(e)}},{key:"setListeners",value:function(e){var t=this;document.getElementById("sortFileNameUp").addEventListener("click",(function(n){t.sortFileName(e,!0)})),document.getElementById("sortFileNameDown").addEventListener("click",(function(n){t.sortFileName(e)})),document.getElementById("sortPrintTimeUp").addEventListener("click",(function(n){t.sortPrintTime(e,!0)})),document.getElementById("sortPrintTimeDown").addEventListener("click",(function(n){t.sortPrintTime(e)})),document.getElementById("sortDateUp").addEventListener("click",(function(n){t.sortUploadDate(e)})),document.getElementById("sortDateDown").addEventListener("click",(function(n){t.sortUploadDate(e,!0)}))}},{key:"sortFileName",value:function(e,t){var n=document.getElementById("fileSortDropdownMenu");e.fileList.fileList=_.sortBy(e.fileList.fileList,[function(e){return e.display}]),e.fileList.folderList=_.sortBy(e.fileList.folderList,[function(e){return e.name}]),t?(e.fileList.fileList=e.fileList.fileList.reverse(),e.fileList.folderList=e.fileList.folderList.reverse(),n.innerHTML='<i class="fas fa-sort-alpha-up"></i> File Name',this.saveSort("file",!0)):(n.innerHTML='<i class="fas fa-sort-alpha-down"></i> File Name',this.saveSort("file",!1)),a.default.drawFiles(e)}},{key:"sortUploadDate",value:function(e,t){var n=document.getElementById("fileSortDropdownMenu");e.fileList.fileList=_.sortBy(e.fileList.fileList,[function(e){return e.uploadDate}]),e.fileList.folderList=_.sortBy(e.fileList.folderList,[function(e){return e.name}]),t?(e.fileList.fileList=e.fileList.fileList.reverse(),e.fileList.folderList=e.fileList.folderList.reverse(),n.innerHTML='<i class="fas fa-sort-numeric-down"></i> Upload Date',this.saveSort("date",!0)):(n.innerHTML='<i class="fas fa-sort-numeric-up"></i> Upload Date',this.saveSort("date",!1)),a.default.drawFiles(e)}},{key:"sortPrintTime",value:function(e,t){var n=document.getElementById("fileSortDropdownMenu");e.fileList.fileList=_.sortBy(e.fileList.fileList,[function(e){return e.expectedPrintTime}]),e.fileList.folderList=_.sortBy(e.fileList.folderList,[function(e){return e.name}]),t?(e.fileList.fileList=e.fileList.fileList.reverse(),e.fileList.folderList=e.fileList.folderList.reverse(),n.innerHTML='<i class="fas fa-sort-numeric-up"></i> Print Time',this.saveSort("time",!1)):(n.innerHTML='<i class="fas fa-sort-numeric-down"></i> Print Time',this.saveSort("time",!0)),a.default.drawFiles(e)}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();n.default=o},{"./fileManager.js":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../octoprint.js")),a=i(e("../octofarm.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i,o,l;return t=e,n=null,i=[{key:"revealBulkPower",value:function(){var e=document.getElementById("bulkPowerBtn");e&&e.classList.contains("d-none")&&e.classList.remove("d-none")}},{key:"powerButtons",value:(l=s(regeneratorRuntime.mark((function e(t){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("printerDropDownMaker-"+t._id),""!==t.powerSettings.powerOffURL&&(n.classList.contains("d-none")&&n.classList.remove("d-none"),(a=document.getElementById("printerPowerOff-"+t._id)).classList.contains("d-none")&&(a.classList.remove("d-none"),a.addEventListener("click",function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bootbox.confirm({message:"Are you sure you would like to power down your printer?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.next=3,r.default.power(t,t.powerSettings.powerOffURL,"Power Off",t.powerSettings.powerOffCommand);case 3:return e.next=5,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 5:return e.next=7,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 7:return e.next=9,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),""!==t.powerSettings.powerOnURL&&(n.classList.contains("d-none")&&n.classList.remove("d-none"),(i=document.getElementById("printerPowerOn-"+t._id)).classList.contains("d-none")&&(i.classList.remove("d-none"),i.addEventListener("click",function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.power(t,t.powerSettings.powerOnURL,"Power On",t.powerSettings.powerOnCommand);case 2:return e.next=4,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 4:return e.next=6,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 6:return e.next=8,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),""===t.powerSettings.powerStatusURL){e.next=8;break}return n.classList.contains("d-none")&&n.classList.remove("d-none"),e.next=7,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 7:e.sent;case 8:""!==t.powerSettings.powerToggleURL&&(n.classList.contains("d-none")&&n.classList.remove("d-none"),(o=document.getElementById("printerPower-"+t._id))&&!0===o.disabled&&(o.disabled=!1,o.addEventListener("click",function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("green"!==document.getElementById("printerStatus-"+t._id).style.color&&"black"!==document.getElementById("printerStatus-"+t._id).style.color){e.next=4;break}bootbox.confirm({message:"Are you sure you would like to power down your printer?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return e.next=3,r.default.power(t,t.powerSettings.powerToggleURL,"Power Toggle",t.powerSettings.powerToggleCommand);case 3:return e.sent,e.next=6,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 6:return e.next=8,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 8:return e.next=10,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.next=13;break;case 4:return e.next=6,r.default.power(t,t.powerSettings.powerToggleURL,"Power Toggle",t.powerSettings.powerToggleCommand);case 6:return e.sent,e.next=9,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 9:return e.next=11,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 11:return e.next=13,r.default.getPowerStatus(t,t.powerSettings.powerStatusURL,t.powerSettings.powerStatusCommand);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 9:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"applyBtn",value:(o=s(regeneratorRuntime.mark((function t(n,i){var o,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===n.otherSettings.system||document.getElementById("printerPower-"+n._id)||(""!==n.otherSettings.system.commands.serverRestartCommand&&null!==n.otherSettings.system.commands.serverRestartCommand||""!==n.otherSettings.system.commands.systemRestartCommand&&null!==n.otherSettings.system.commands.systemRestartCommand||""!==n.otherSettings.system.commands.systemShutdownCommand&&null!==n.otherSettings.system.commands.systemShutdownCommand)&&(document.getElementById(i+n._id).innerHTML=e.printerPowerBtn(n._id),""!==n.otherSettings.system.commands.serverRestartCommand&&null!==n.otherSettings.system.commands.serverRestartCommand&&((o=document.getElementById("printerRestartOctoPrint-"+n._id)).classList.remove("d-none"),o.addEventListener("click",(function(e){r.default.system(n,"restart")}))),""!==n.otherSettings.system.commands.systemRestartCommand&&null!==n.otherSettings.system.commands.systemRestartCommand&&((s=document.getElementById("printerRestartHost-"+n._id)).classList.remove("d-none"),s.addEventListener("click",(function(e){r.default.system(n,"reboot")}))),""!==n.otherSettings.system.commands.systemShutdownCommand&&null!==n.otherSettings.system.commands.systemShutdownCommand&&((c=document.getElementById("printerShutdownHost-"+n._id)).classList.remove("d-none"),c.addEventListener("click",(function(e){r.default.system(n,"shutdown")})))),null!==n.powerSettings&&(""!==n.powerSettings.powerOnCommand&&(document.getElementById("printerPower-"+n._id)?e.powerButtons(n):document.getElementById(i+n._id)&&(document.getElementById(i+n._id).innerHTML=e.printerPowerBtn(n._id),e.powerButtons(n))),void 0!==n.powerSettings.wol&&n.powerSettings.wol.enabled&&(""===n.powerSettings.wol.ip||""===n.powerSettings.wol.port||""===n.powerSettings.wol.interval||""===n.powerSettings.wol.count?console.log("ISSUE WITH WAKE ON LAN SETTINGS"):(l=document.getElementById("printerWakeHost-"+n._id)).classList.contains("d-none")&&(l.classList.remove("d-none"),l.addEventListener("click",(function(e){a.default.post("printers/wakeHost",n.powerSettings.wol)})))));case 2:case"end":return t.stop()}}),t)}))),function(e,t){return o.apply(this,arguments)})},{key:"printerPowerBtn",value:function(e){return'\n      \n             <button title="Toggle your printers power"\n                                    id="printerPower-'.concat(e,'"\n                                    class="btn btn-outline-danger btn-sm" type="button" disabled>\n                                <i id="printerStatus-').concat(e,'" class="fas fa-power-off" style="color: black;"></i>\n                            </button>\n                            <button title="Other power actions" type="button" class="btn btn-sm btn-outline-danger dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                <span class="sr-only">Toggle Dropdown</span>\n                            </button>\n                            <div class="dropdown-menu text-center dropdown-menu-right">\n                                  <a id="printerPowerOn-').concat(e,'" title="Turn on your printer" class="dropdown-item d-none" href="#"><i class="textComplete fas fa-power-off"></i> Power On Printer</a>\n                                <a id="printerPowerOff-').concat(e,'" title="Turn off your printer" class="dropdown-item d-none" href="#"><i class="textOffline fas fa-power-off"></i> Power Off Printer</a>\n                          \n                                <div id="printerDropDownMaker-').concat(e,'" class="dropdown-divider d-none"></div>\n                                <a id="printerRestartOctoPrint-').concat(e,'" title="Restart OctoPrint Service" class="dropdown-item d-none" href="#"><i class="textActive fas fa-redo"></i> Restart OctoPrint</a>\n                                <a id="printerRestartHost-').concat(e,'" title="Reboot OctoPrint Host" class="dropdown-item d-none" href="#"><i class="textActive fas fa-sync-alt"></i> Reboot Host</a>\n                                <a id="printerWakeHost-').concat(e,'" title="Wake up OctoPrint Host" class="dropdown-item d-none" href="#"><i class="textComplete fas fa-power-off"></i> Wake Host</a>\n                                <a id="printerShutdownHost-').concat(e,'" title="Shutdown OctoPrint Host" class="dropdown-item d-none" href="#"><i class="textOffline fas fa-power-off"></i> Shutdown Host</a>\n                            </div>\n        </div>\n    ')}}],n&&c(t.prototype,n),i&&c(t,i),e}();n.default=l},{"../octofarm.js":18,"../octoprint.js":19}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(e("../octoprint.js")),a=u(e("../octofarm.js")),i=u(e("../functions/calc.js")),o=u(e("../functions/ui.js")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(e("./fileManager.js")),c=e("./filamentGrab.js"),l=u(e("../modules/fileSorting.js"));u(e("./powerButton.js"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=0,y=!1,h=null;$("#printerManagerModal").on("hidden.bs.modal",(function(e){document.getElementById("printerControlCamera")&&(document.getElementById("printerControlCamera").src="")})),$("#connectionModal").on("hidden.bs.modal",(function(e){document.getElementById("connectionAction")&&document.getElementById("connectionAction").remove()}));var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,d,u,f,w,x,L;return t=e,n=null,d=[{key:"init",value:(L=b(regeneratorRuntime.mark((function t(n,r,a){var i,o,s,l,d,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n){t.next=20;break}return document.getElementById("printerControlCamera")&&(document.getElementById("printerControlCamera").src=""),v=n,i=_.findIndex(r,(function(e){return e._id==n})),h=r[i],y||((o=document.getElementById("printerSelection")).innerHTML="",a.forEach((function(e){"Offline"!==e.state.category&&o.insertAdjacentHTML("beforeend",'\n                  <option value="'.concat(e.printerID,'" selected>').concat(e.printerName,"</option>\n              "))})),o.value=h._id,o.addEventListener("change",(function(t){document.getElementById("printerControls")&&(document.getElementById("printerControls").innerHTML=""),document.getElementById("pmStatus").innerHTML='<i class="fas fa-spinner fa-spin"></i>',document.getElementById("pmStatus").className="btn btn-secondary mb-2",document.getElementById("printerPortDrop").innerHTML="",document.getElementById("printerBaudDrop").innerHTML="",document.getElementById("printerProfileDrop").innerHTML="",document.getElementById("printerConnect").innerHTML="",e.init(t.target.value,r,a)})),y=!0),t.next=8,(0,c.returnDropDown)();case 8:return s=t.sent,t.next=11,e.loadPrinter(h,a,s);case 11:t.sent,(l=e.grabPage()).terminal.terminalWindow.innerHTML="",l.printerControls["step"+h.stepRate].className="btn btn-dark active",e.applyState(h,l),e.applyTemps(h,l),e.applyListeners(l,r,s),t.next=33;break;case 20:if(!document.getElementById("terminal")){t.next=33;break}return d=_.findIndex(r,(function(e){return e._id==v})),h=r[d],(u=document.getElementById("printerSelection")).innerHTML="",a.forEach((function(e){"Offline"!==e.state.category&&u.insertAdjacentHTML("beforeend",'\n                  <option value="'.concat(e.printerID,'" selected>').concat(e.printerName,"</option>\n              "))})),u.value=h._id,t.next=29,e.grabPage();case 29:p=t.sent,e.applyState(h,p),e.applyTemps(h,p),document.getElementById("printerManagerModal").style.overflow="auto";case 33:case"end":return t.stop()}}),t)}))),function(e,t,n){return L.apply(this,arguments)})},{key:"loadPrinter",value:(x=b(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,d,u,p,m,f,b,g,v,y,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById("printerPortDrop"),i=document.getElementById("printerBaudDrop"),o=document.getElementById("printerProfileDrop"),d=document.getElementById("printerConnect"),a.innerHTML='\n    <div class="input-group mb-1"> <div class="input-group-prepend"> <label class="input-group-text bg-secondary text-light" for="dashboardSerialPort">Port:</label> </div> <select class="custom-select bg-secondary text-light" id="pmSerialPort"></select></div>\n    ',i.innerHTML='\n    <div class="input-group mb-1"> <div class="input-group-prepend"> <label class="input-group-text bg-secondary text-light" for="dashboardBaudrate">Baudrate:</label> </div> <select class="custom-select bg-secondary text-light" id="pmBaudrate"></select></div>\n    ',o.innerHTML='\n    <div class="input-group mb-1"> <div class="input-group-prepend"> <label class="input-group-text bg-secondary text-light" for="dashboardPrinterProfile">Profile:</label> </div> <select class="custom-select bg-secondary text-light" id="pmProfile"></select></div>\n    ',t.connectionOptions.baudrates.forEach((function(e){document.getElementById("pmBaudrate").insertAdjacentHTML("beforeend",'<option value="'.concat(e,'">').concat(e,"</option>"))})),null!=t.connectionOptions.baudratePreference&&(document.getElementById("pmBaudrate").value=t.connectionOptions.baudratePreference),t.connectionOptions.ports.forEach((function(e){document.getElementById("pmSerialPort").insertAdjacentHTML("beforeend",'<option value="'.concat(e,'">').concat(e,"</option>"))})),null!=t.connectionOptions.portPreference&&(document.getElementById("pmSerialPort").value=t.connectionOptions.portPreference),t.connectionOptions.printerProfiles.forEach((function(e){document.getElementById("pmProfile").insertAdjacentHTML("beforeend",'<option value="'.concat(e.id,'">').concat(e.name,"</option>"))})),null!=t.connectionOptions.printerProfilePreference&&(document.getElementById("pmProfile").value=t.connectionOptions.printerProfilePreference),"Disconnected"===t.printerState.state||"Error!"===t.printerState.state?(d.innerHTML='<center> <button id="pmConnect" class="btn btn-success inline" value="connect">Connect</button><a title="Open your Printers Web Interface" id="pmWebBtn" type="button" class="tag btn btn-info ml-1" target="_blank" href="'+t.printerURL+'" role="button"><i class="fas fa-globe-europe"></i></a><div id="powerBtn-'+t._id+'" class="btn-group ml-1"></div></center>',document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1):(d.innerHTML='<center> <button id="pmConnect" class="btn btn-danger inline" value="disconnect">Disconnect</button><a title="Open your Printers Web Interface" id="pmWebBtn" type="button" class="tag btn btn-info ml-1" target="_blank" href="'+t.printerURL+'" role="button"><i class="fas fa-globe-europe"></i></a><div id="pmPowerBtn-'+t._id+'" class="btn-group ml-1"></div></center>',document.getElementById("pmSerialPort").disabled=!0,document.getElementById("pmBaudrate").disabled=!0,document.getElementById("pmProfile").disabled=!0),u="",p="",m="",null!==t.otherSettings&&(t.otherSettings.webCamSettings.flipH&&(u="rotateY(180deg)"),t.otherSettings.webCamSettings.flipV&&(p="rotateX(180deg)"),t.otherSettings.webCamSettings.rotate90&&(m="rotate(90deg)")),document.getElementById("printerControls").innerHTML='\n          <div class="row">\n              <div class="col-lg-3">\n             <div class="row">\n                <div class="col-12">\n                <center>\n                <h5>Operation</h5>\n            </center>\n            <hr>\n  \n            <center>\n            <button id="pmPrintStart" type="button" class="btn btn-success" role="button"><i class="fas fa-print"></i> Print</button>\n            <button id="pmPrintPause" type="button" class="btn btn-light" role="button" disabled><i class="fas fa-pause"></i> Pause</button>\n            <button id="pmPrintRestart" type="button" class="btn btn-danger" role="button"><i class="fas fa-undo"></i> Restart</button>\n            <button id="pmPrintResume" type="button" class="btn btn-success" role="button"><i class="fas fa-redo"></i> Resume</button>\n            <button id="pmPrintStop" type="button" class="btn btn-danger" disabled><i class="fas fa-square"></i> Cancel</button>\n            </center></div></div>\n                 <div id="cameraRow" class="row">\n                      <div class="col-12">\n                            <center>\n                                <h5>Camera</h5>\n                            </center>\n                            <hr>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div id="cameraCol" class="col-12">\n                          <img style="transform: '.concat(u," ").concat(p," ").concat(m,';" id="printerControlCamera" width="100%" src=""/>\n                        </div>\n                    </div>\n                                  <div class="row">\n                    <div class="col-9">\n                        <center>\n                            <h5>X/Y</h5>\n                        </center>\n                        <hr>\n                    </div>\n                    <div class="col-3">\n                        <center>\n                            <h5>Z</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-3"></div>\n                    <div class="col-3">\n                        <center><button id="pcYpos" type="button" class="btn btn-light"><i class="fas fa-arrow-up"></i></button></center>\n                    </div>\n                    <div class="col-3"></div>\n                    <div class="col-3">\n                        <center><button id="pcZpos"type="button" class="btn btn-light"><i class="fas fa-arrow-up"></i></button></center>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-3">\n                        <center><button id="pcXneg" type="button" class="btn btn-light"><i class="fas fa-arrow-left"></i></button></center>\n                    </div>\n                    <div class="col-3">\n                        <center><button id="pcXYhome" type="button" class="btn btn-light"><i class="fas fa-home"></i></button></center>\n                    </div>\n                    <div class="col-3">\n                        <center><button id="pcXpos" type="button" class="btn btn-light"><i class="fas fa-arrow-right"></i></button></center>\n                    </div>\n                    <div class="col-3">\n                        <center><button id="pcZhome" type="button" class="btn btn-light"><i class="fas fa-home"></i></button></center>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-3"></div>\n                    <div class="col-3">\n                        <center><button id="pcYneg" type="button" class="btn btn-light"><i class="fas fa-arrow-down"></i></button></center>\n                    </div>\n                    <div class="col-3"></div>\n                    <div class="col-3">\n                        <center><button id="pcZneg" type="button" class="btn btn-light"><i class="fas fa-arrow-down"></i></button></center>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <div id="pcAxisSteps" class="btn-group" role="group">\n                                <button id="pcAxisSteps01" type="button" class="btn btn-light" value="01">0.1</button>\n                                <button id="pcAxisSteps1" type="button" class="btn btn-light" value="1">1</button>\n                                <button id="pcAxisSteps10" type="button" class="btn btn-light" value="10">10</button>\n                                <button id="pcAxisSteps100" type="button" class="btn btn-light" value="100">100</button>\n                            </div>\n                        </center>\n                    </div>\n                </div>\n                              <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Extruder</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                                      <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <div class="input-group">\n                                <input id="pcExtruder" type="number" class="form-control" placeholder="0" aria-label="Recipient\'s username" aria-describedby="basic-addon2">\n                                <div class="input-group-append">\n                                    <span class="input-group-text" id="basic-addon2">mm</span>\n                                </div>\n                            </div>\n                        </center>\n                    </div>\n                <div class="row">\n                    <div class="col-12 text-center">\n                        <center><button id="pcExtrude" class="btn btn-light" type="submit"><i class="fas fa-redo"></i> Extrude</button> <button id="pcRetract" class="btn btn-light" type="submit"><i class="fas fa-undo"></i> Retract</button></center>\n                </div>\n            </div>\n            </div>\n                  <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Feed/Flow</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                  <div class="row">\n                    <div class="col-10 col-lg-8 col-xl-8">\n                        <label for="pcFeed">Feed Rate: <span id="pcFeedValue">').concat(t.feedRate,'%</span></label>\n                        <input type="range" class="octoRange custom-range" min="50" max="150" step="1" id="pcFeed" value="').concat(t.feedRate,'">\n                    </div>\n                    <div class="col-2 col-lg-4 col-xl-4">\n                        <button id="pcFeedRate" type="button" class="btn btn-light">Update</button>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-10 col-lg-8 col-xl-8">\n                        <label for="pcFlow">Flow Rate: <span id="pcFlowValue">').concat(t.flowRate,'%</span></label>\n                        <input type="range" class="octoRange custom-range" min="75" max="125" step="1" id="pcFlow" value="').concat(t.flowRate,'">\n                    </div>\n                    <div class="col-2 col-lg-4 col-xl-4">\n                        <button id="pcFlowRate" type="button" class="btn btn-light">Update</button>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Motors / Fans</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                  <div class="row">\n                    <div class="col-12">\n                        <center><button id="pcMotorTog" class="btn btn-light" type="submit">Motors Off</button></center>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-12">\n                    <label for="pcFlow">Fan Percent: <span id="pcFanPercent">100%</span></label>\n                    <input type="range" class="octoRange custom-range" min="0" max="100" step="1" id="pcFanPercent" value="100">\n                        <center><button id="pcFanOn" class="btn btn-light" type="submit">Set Fans</button> <button id="pcFanOff" class="btn btn-light" type="submit">Fans Off</button></center>\n                    </div>\n                </div>\n              </div>\n              <div class="col-lg-9 pt-0">\n              <div class="row">\n                  <div class="col-lg-12 col-xl-6">\n                    <div class="col-12">\n                                      <center>\n                                          <h5>Print Status</h5>\n                                      </center>\n                                      <hr>\n                                  </div>\n                                  <div class="col-12">\n                                                                  <div class="progress mb-2">\n                                    <div id="pmProgress" class="progress-bar" role="progressbar progress-bar-striped" style="width:100%" aria-valuenow="100%" aria-valuemin="0" aria-valuemax="100">Loading...\n                                    </div>\n                                  </div>\n                </div>\n                <div class="row">\n                <div id="fileThumbnail" class="col-12">\n  \n                </div>\n                <div class="col-12">\n                <center>\n                                 <b class="mb-1">File Name: </b><br><p title="Loading..." class="tag mb-1" id="pmFileName">Loading...</p>\n  </center>\n  </div>\n                  <div class="col-12">\n                <center>\n                                 <b id="resentTitle" class="mb-1 d-none">Resend Statistics: </b><br><p title="Current job resend ratio" class="tag mb-1 d-none" id="printerResends">Loading...</p>\n  </center>\n  </div>\n                  <div class="col-lg-12 col-xl-6">\n                     <center>\n                  <b>Expected Completion Date: </b><p class="mb-1" id="pmExpectedCompletionDate">Loading...</p>\n  \n                    <b>Print Time Remaining: </b><p class="mb-1" id="pmTimeRemain">Loading...</p>\n                    <b>Print Time Elapsed: </b><p class="mb-1" id="pmTimeElapsed">Loading...</p>\n                    <b>Current Z: </b><p class="mb-1" id="pmCurrentZ">Loading...</p>\n                    <b>Expected Job Cost: </b><p class="mb-1" id="pmJobCosts">Loading...</p></center>\n              </div>\n                  <div class="col-lg-12 col-xl-6">\n                                 <center>\n                   <b>Expected Print Time: </b><p class="mb-1" id="pmExpectedTime">Loading...</p>\n          <b class="mb-1">Expected Units: </b><br><p class="tag mb-1" id="pmExpectedWeight">Loading...</p>\n          <b class="mb-1">Expected Filament Costs: </b><br><p class="tag mb-1" id="pmExpectedFilamentCost">Loading...</p>\n          <b class="mb-1">Expected Printer Costs: </b><br><p class="tag mb-1" id="pmExpectedPrinterCost">Loading...</p>\n  \n  \n                                 </center>\n  </div>\n                </div>\n                  </div>\n                  <div class="col-lg-12 col-xl-6">\n                 <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Tools</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                <div class="row">\n                  <div class="col-12">\n                      <button id="pmTempTime" type="button" class="btn btn-secondary btn-sm float-right" disabled>Updated: <i class="far fa-clock"></i> Never</button>\n                  </div>\n                </div>\n                <div class="row" id="pmToolTemps">\n  \n                </div>\n                <div class="row">\n                    <div id="pmBedTemp" class="col-lg-6">\n                    \n                    </div>\n                    <div id="pmChamberTemp" class="col-lg-6">\n                    \n                    </div>\n                </div>\n                  </div>\n                </div>\n  \n                           <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Files</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                <div class="row bg-secondary rounded-top">\n                <div class="col-12">\n                     <h5 class="float-left  mb-0">\n                      <button id="printerFileCount" type="button" class="btn btn-secondary float-right d-block" href="#" aria-expanded="false" disabled="">\n                        <i class="fas fa-file"></i> Loading... <i class="fas fa-folder"></i> Loading...\n                      </button>\n                      <button id="printerStorage" type="button" class="btn btn-secondary float-right d-block" href="#" aria-expanded="false" disabled="">\n  \n                        <i class="fas fa-hdd"></i> Loading...\n                      </button>\n                    </h5>\n                    <h5 class="float-left mb-0">\n                      <button type="button" class="btn btn-secondary float-right d-block" href="#" aria-expanded="false" disabled="">\n                        <i class="fas fa-file-code"></i> Files: <span id="currentFolder">local</span>/\n                      </button>\n                    </h5>\n                    <div class="btn btn-secondary form-group float-right  mb-0">\n                      <form class="form-inline">\n                        <div class="form-group">\n                          <label for="searchFiles">\n                            <i class="fas fa-search pr-1"></i>\n                          </label>\n                          <input id="searchFiles" type="text" placeholder="File Search..." class="search-control search-control-underlined">\n                        </div>\n                      </form>\n                    </div>\n                   </div>\n                  </div>\n                  <div class="row bg-secondary rounded-bottom">\n                    <div class="col-lg-2">\n                      <i class="fas fa-file-upload ml-2 mb-1"></i><span id="fileCounts-').concat(t._id,'"> 0 </span>\n                    </div>\n                    <div class="col-lg-10">\n                      <div class="progress">\n                        <div id="fileProgress-').concat(t._id,'" class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">\n                          0%\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="row mb-1">\n                      <div class="col-12">\n                       <button id="fileBackBtn" type="button" class="btn btn-success float-right">\n                        <i class="fas fa-chevron-left"></i> Back\n                      </button>\n                      \x3c!-- Split dropright button --\x3e\n                      <div class="float-right mr-3 btn-group">\n                          <div id="fileSortDropdownMenu" class="btn bg-secondary">Sort</div>\n                          <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="sr-only">Toggle Dropdown</span>\n                          </button>\n                          <div class="dropdown-menu">\n                            \n                       <a class="dropdown-item" id="sortFileNameDown"><i class="fas fa-sort-alpha-down"></i> File Name</a>\n  \n                      <a class="dropdown-item" id="sortFileNameUp"><i class="fas fa-sort-alpha-up"></i> File Name</a>\n                             <div class="dropdown-divider"></div>\n                      <a class="dropdown-item" id="sortPrintTimeDown"><i class="fas fa-sort-numeric-down"></i> Print Time</a>\n  \n                      <a class="dropdown-item" id="sortPrintTimeUp"><i class="fas fa-sort-numeric-up"></i> Print Time</a>\n                             <div class="dropdown-divider"></div>\n                      <a class="dropdown-item" id="sortDateDown"><i class="fas fa-sort-numeric-down"></i> Upload Date</a>\n  \n                      <a class="dropdown-item" id="sortDateUp"><i class="fas fa-sort-numeric-up"></i> Upload Date</a>\n                          </div>\n                        </div>\n\n                        <label class="btn btn-success float-left mr-1 mb-0 bg-colour-1" for="fileUploadBtn"><i class="fas fa-file-import"></i> Upload File(s)</label>\n                        <input id="fileUploadBtn" multiple accept=".gcode,.gco,.g" type="file" class="btn btn-success float-left bg-colour-1" id="uploadFileBtn">\n                        <label class="btn btn-info float-left mr-1 mb-0 bg-colour-2" for="fileUploadPrintBtn"><i class="fas fa-file-import"></i> Upload and Print</label>\n                        <input id="fileUploadPrintBtn" accept=".gcode,.gco,.g" type="file" class="btn btn-success float-left bg-colour-2" id="uploadFileBtn">\n                      <button\n                        id="createFolderBtn"\n                        type="button"\n                        class="btn btn-warning float-left mr-1 mb-0 bg-colour-3"\n                        data-toggle="collapse"\n                        href="#createFolder"\n                        role="button"\n                        aria-expanded="false"\n                        aria-controls="createFolder"\n                      >\n                        <i class="fas fa-folder-plus"></i> Create Folder\n                      </button>\n                      <button id="fileReSync" type="button" class="btn btn-primary mb-0 bg-colour-4">\n                        <i class="fas fa-sync"></i> Re-Sync\n                      </button>\n                      </div>\n  \n                  </div>\n  \n                      <div id="fileList-').concat(t._id,'" class="list-group" style="height:500px; min-height:500px;max-height:500px; overflow-y:scroll;">\n  \n                      </div>\n              </div>\n          </div>\n                 <div class="row">\n                    <div class="col-12">\n                        <center>\n                            <h5>Terminal</h5>\n                        </center>\n                        <hr>\n                    </div>\n                </div>\n                <div class="row">\n                 <div id="terminal" class="terminal-window bg-secondary">\n                  </div>\n                    <div class="input-group">\n                      <textarea id="terminalInput" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="basic-addon2"></textarea>\n                      <div class="input-group-append">\n                        <button class="btn btn-secondary" id="terminalInputBtn" type="submit">Send</button>\n                      </div>\n                    </div>\n                    <form class="was-validated">\n                      <div class="custom-control custom-checkbox mb-3">\n                        <input \n                        type="checkbox" class="custom-control-input" id="tempMessages" required checked>\n                        <label class="custom-control-label" for="tempMessages">Temperature Messages</label>\n                        <div class="valid-feedback">Showing temperature messages</div>\n                        <div class="invalid-feedback">Not showing temperature messages</div>\n                      </div>\n                      </form>\n                      <form class="was-validated">\n                       <div class="custom-control custom-checkbox mb-3">\n                        <input\n                        type="checkbox" class="custom-control-input" id="sdMessages" required checked>\n                        <label class="custom-control-label" for="sdMessages">SD Messages</label>\n                        <div class="valid-feedback">Showing sd messages</div>\n                        <div class="invalid-feedback">Not showing sd messages</div>\n                      </div>\n                      </form>\n                      <form class="was-validated">\n                      <div class="custom-control custom-checkbox mb-3">\n                        <input\n                        type="checkbox" class="custom-control-input" id="waitMessages" required checked>\n                        <label class="custom-control-label" for="waitMessages">Wait Responses</label>\n                        <div class="valid-feedback">Showing wait responses</div>\n                        <div class="invalid-feedback">Not showing wait responses</div>\n                      </div>\n                      </form>\n                </div>\n  \n            </div>\n            '),f="",f=void 0!==t.cameraURL&&t.cameraURL.includes("http")?t.cameraURL:"../../../images/noCamera.jpg",b=document.getElementById("cameraRow"),t.otherSettings.webCamSettings.webcamEnabled?(document.getElementById("printerControlCamera").src=f,b.classList.contains("d-none")&&b.classList.remove("d-none")):b.classList.contains("d-none")||b.classList.add("d-none"),g=document.getElementById("pmToolTemps"),document.getElementById("pmBedTemp").innerHTML="",document.getElementById("pmChamberTemp").innerHTML="",g.innerHTML="",null!==t.currentProfile)for(v=Object.keys(t.currentProfile),y=0;y<v.length;y++)if(v[y].includes("extruder"))for(w=function(e){g.insertAdjacentHTML("beforeend",'\n                                <div class="col-md-12 col-lg-12 col-xl-6">\n                                   <div class="md-form input-group mb-3">\n                                       <span class="input-group-text">'.concat(e,'</span>\n                                      <div title="Actual Tool temperature" class="input-group-prepend">\n                                          <span id="tool').concat(e,'Actual" class="input-group-text">0Â°C</span>\n                                      </div>\n                                      <input title="Set your target Tool temperature" id="tool').concat(e,'Target" type="number" class="form-control col" placeholder="0Â°C" aria-label="Recipient\'s username" aria-describedby="MaterialButton-addon2">\n                                      <div class="input-group-append">\n                                          <button class="btn btn-md btn-light m-0 p-1" type="button" id="tool').concat(e,'Set">Set</button>\n                                      </div>\n                                  </div>\n                                </div>\n                                <div class="col-md-6">\n                                 <div class="input-group mb-1"><div class="input-group-prepend"> <label class="input-group-text bg-secondary text-light" for="tool').concat(e,'FilamentManagerFolderSelect">Filament:</label> </div> <select class="custom-select bg-secondary text-light" id="tool').concat(e,'FilamentManagerFolderSelect"><option value="" selected></option></select></div>\n                                </div>\n                                '));var n=document.getElementById("tool".concat(e,"FilamentManagerFolderSelect"));n.innerHTML="",r.forEach((function(e){n.insertAdjacentHTML("beforeend",e)})),Array.isArray(t.selectedFilament)&&0!==t.selectedFilament.length&&void 0!==t.selectedFilament[e]&&null!==t.selectedFilament[e]&&(n.value=t.selectedFilament[e]._id),n.addEventListener("change",(function(n){(0,c.selectFilament)(t._id,n.target.value,"".concat(e)),setTimeout((function(){s.default.refreshFiles(h,'<i class="fas fa-spinner fa-pulse"></i> Checking Octoprint for information... <br>')}),1e3)}))},x=0;x<t.currentProfile[v[y]].count;x++)w(x);else v[y].includes("heatedBed")?t.currentProfile[v[y]]&&document.getElementById("pmBedTemp").insertAdjacentHTML("beforeend",'\n                           <div class="col-12">\n                          <center>\n                              <h5>Bed</h5>\n                          </center>\n                          <hr>\n                          <div class="md-form input-group mb-3">\n                              <div title="Actual Bed temperature" class="input-group-prepend">\n                                  <span id="bedActual" class="input-group-text">0Â°C</span>\n                              </div>\n                              <input title="Set your target Bed temperature" id="bedTarget" type="number" class="form-control col-lg-12 col-xl-12" placeholder="0Â°C" aria-label="Recipient\'s username" aria-describedby="MaterialButton-addon2">\n                              <div class="input-group-append">\n                                  <button class="btn btn-md btn-light m-0 p-1" type="button" id="bedSet">Set</button>\n                              </div>\n                          </div>\n                            </div>\n                         '):v[y].includes("heatedChamber")&&t.currentProfile[v[y]]&&document.getElementById("pmChamberTemp").insertAdjacentHTML("beforeend",'\n                           <div class="col-12">\n                          <center>\n                              <h5>Chamber</h5>\n                          </center>\n                          <hr>\n                          <div class="md-form input-group mb-3">\n                              <div title="Actual Bed temperature" class="input-group-prepend">\n                                  <span id="chamberActual" class="input-group-text">0Â°C</span>\n                              </div>\n                              <input title="Set your target Bed temperature" id="chamberTarget" type="number" class="form-control col-lg-12 col-xl-12" placeholder="0Â°C" aria-label="Recipient\'s username" aria-describedby="MaterialButton-addon2">\n                              <div class="input-group-append">\n                                  <button class="btn btn-md btn-light m-0 p-1" type="button" id="chamberSet">Set</button>\n                              </div>\n                          </div>\n                            </div>\n                         ');return l.default.loadSort(t),e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)}))),function(e,t,n){return x.apply(this,arguments)})},{key:"applyListeners",value:function(e,t,n){if(document.querySelectorAll("input.octoRange").forEach((function(e){e.addEventListener("input",(function(e){e.target.previousSibling.previousSibling.lastChild.innerHTML="".concat(e.target.value,"%")}))})),h.state,e.connectPage.connectButton.addEventListener("click",(function(t){e.connectPage.connectButton.disabled=!0,r.default.connect(e.connectPage.connectButton.value,h)})),e.printerControls.xPlus.addEventListener("click",(function(e){r.default.move(e,h,"jog","x")})),e.printerControls.xMinus.addEventListener("click",(function(e){r.default.move(e,h,"jog","x","-")})),e.printerControls.yPlus.addEventListener("click",(function(e){r.default.move(e,h,"jog","y")})),e.printerControls.yMinus.addEventListener("click",(function(e){r.default.move(e,h,"jog","y","-")})),e.printerControls.xyHome.addEventListener("click",(function(e){r.default.move(e,h,"home",["x","y"])})),e.printerControls.zPlus.addEventListener("click",(function(e){r.default.move(e,h,"jog","z")})),e.printerControls.zMinus.addEventListener("click",(function(e){r.default.move(e,h,"jog","z","-")})),e.printerControls.zHome.addEventListener("click",(function(e){r.default.move(e,h,"home",["z"])})),e.printerControls.step01.addEventListener("click",(function(t){a.default.post("printers/stepChange",{printer:h._id,newSteps:"01"}),e.printerControls.step01.className="btn btn-dark active",e.printerControls.step1.className="btn btn-light",e.printerControls.step10.className="btn btn-light",e.printerControls.step100.className="btn btn-light"})),e.printerControls.step1.addEventListener("click",(function(t){a.default.post("printers/stepChange",{printer:h._id,newSteps:"1"}),e.printerControls.step1.className="btn btn-dark active",e.printerControls.step01.className="btn btn-light",e.printerControls.step10.className="btn btn-light",e.printerControls.step100.className="btn btn-light"})),e.printerControls.step10.addEventListener("click",(function(t){a.default.post("printers/stepChange",{printer:h._id,newSteps:"10"}),e.printerControls.step10.className="btn btn-dark active",e.printerControls.step1.className="btn btn-light",e.printerControls.step01.className="btn btn-light",e.printerControls.step100.className="btn btn-light"})),e.printerControls.step100.addEventListener("click",(function(t){a.default.post("printers/stepChange",{printer:h._id,newSteps:"100"}),e.printerControls.step100.className="btn btn-dark active",e.printerControls.step1.className="btn btn-light",e.printerControls.step10.className="btn btn-light",e.printerControls.step01.className="btn btn-light"})),null!==h.currentProfile)for(var i=Object.keys(h.currentProfile),c=0;c<i.length;c++)if(i[c].includes("extruder"))for(var l=function(e){var t=function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){document.getElementById("tool"+e+"Set").className="btn btn-md btn-light m-0 p-1"},i=document.getElementById("tool"+e+"Target"),o=i.value,document.getElementById("tool"+e+"Target").value="","Off"===o&&(o=0),s={command:"target",targets:m({},"tool"+e,parseInt(o))},t.next=7,r.default.post(h,"printer/tool",s);case 7:204===t.sent.status?(document.getElementById("tool"+e+"Set").className="btn btn-md btn-success m-0 p-1",setTimeout(a,500)):(document.getElementById("tool"+e+"Set").className="btn btn-md btn-danger m-0 p-1",setTimeout(a,500));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();document.getElementById("tool"+e+"Target").addEventListener("change",function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("tool"+e+"Target").value<=0&&(document.getElementById("tool"+e+"Target").value="0");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.getElementById("tool"+e+"Target").addEventListener("keypress",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===n.key&&t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.getElementById("tool"+e+"Set").addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},d=0;d<h.currentProfile[i[c]].count;d++)l(d);else i[c].includes("heatedBed")?h.currentProfile[i[c]]&&function(){var t=function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){e.temperatures.bed[2].classList="btn btn-md btn-light m-0 p-1"},i=e.temperatures.bed[1].value,e.temperatures.bed[1].value="","Off"===i&&(i=0),o={command:"target",target:parseInt(i)},t.next=7,r.default.post(h,"printer/bed",o);case 7:t.sent.status,e.temperatures.bed[2].className="btn btn-md btn-success m-0 p-1",e.temperatures.bed[2].value="",setTimeout(a,500);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.temperatures.bed[1]&&e.temperatures.bed[1].addEventListener("change",function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.temperatures.bed[1].value<=0&&(e.temperatures.bed[1].value="");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.temperatures.bed.forEach((function(e){e.id.includes("Target")&&e&&e.addEventListener("keypress",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===n.key&&t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.id.includes("Set")&&e&&e.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}():i[c].includes("heatedChamber")&&h.currentProfile[i[c]]&&function(){var t=function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){e.temperatures.chamber[2].classList="btn btn-md btn-light m-0 p-1"},i=e.temperatures.chamber[1].value,e.temperatures.chamber[1].value="","Off"===i&&(i=0),o={command:"target",target:parseInt(i)},t.next=7,r.default.post(h,"printer/chamber",o);case 7:t.sent.status,e.temperatures.chamber[2].className="btn btn-md btn-success m-0 p-1",setTimeout(a,500);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.temperatures.chamber[1]&&e.temperatures.chamber[1].addEventListener("change",function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.temperatures.chamber[1].value<=0&&(e.temperatures.chamber[1].value="");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.temperatures.chamber.forEach((function(e){e.id.includes("Target")&&e&&e.addEventListener("keypress",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===n.key&&t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.id.includes("Set")&&e&&e.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}();e.printerControls.feedRate.addEventListener("click",function(){var t=b(regeneratorRuntime.mark((function t(n){var i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){n.target.classList="btn btn-light"},o=(o=e.printerControls.feedRateValue.innerHTML).replace("%",""),a.default.post("printers/feedChange",{printer:h._id,newSteps:o}),s={command:"feedrate",factor:parseInt(o)},t.next=7,r.default.post(h,"printer/printhead",s);case 7:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(i,500)):(n.target.classList="btn btn-danger",setTimeout(i,500));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.printerControls.flowRate.addEventListener("click",function(){var t=b(regeneratorRuntime.mark((function t(n){var i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){n.target.classList="btn btn-light"},o=(o=e.printerControls.flowRateValue.innerHTML).replace("%",""),a.default.post("printers/flowChange",{printer:h._id,newSteps:o}),s={command:"flowrate",factor:parseInt(o)},t.next=7,r.default.post(h,"printer/tool",s);case 7:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(i,500)):(n.target.classList="btn btn-danger",setTimeout(i,500));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.printerControls.motorsOff.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){t.target.classList="btn btn-light"},a={commands:["M18"]},e.next=4,r.default.post(h,"printer/command",a);case 4:204===e.sent.status?(t.target.classList="btn btn-success",setTimeout(n,500)):(t.target.classList="btn btn-danger",setTimeout(n,500));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.printerControls.fansOn.addEventListener("click",function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(a=e.printerControls.fanPercent.innerHTML).replace("%",""),a/=100,a*=255,a=Math.floor(a),i=function(){n.target.classList="btn btn-light"},o={commands:["M106 S".concat(a)]},t.next=9,r.default.post(h,"printer/command",o);case 9:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(i,500)):(n.target.classList="btn btn-danger",setTimeout(i,500));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.printerControls.fansOff.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){t.target.classList="btn btn-light"},a={commands:["M107"]},e.next=4,r.default.post(h,"printer/command",a);case 4:204===e.sent.status?(t.target.classList="btn btn-success",setTimeout(n,500)):(t.target.classList="btn btn-danger",setTimeout(n,500));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.printerControls.extrude.addEventListener("click",function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(){n.target.classList="btn btn-light"},null==e.printerControls.extruder.value||""===e.printerControls.extruder.value){t.next=12;break}if(!r.default.selectTool(h,"tool0")){t.next=10;break}return i=e.printerControls.extruder.value,s={command:"extrude",amount:parseInt(i)},t.next=8,r.default.post(h,"printer/tool",s);case 8:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(a,500)):(n.target.classList="btn btn-danger",setTimeout(a,500));case 10:t.next=13;break;case 12:o.default.createAlert("error","You haven't told octoprint how much you'd like to extrude...",3e3,"clicked");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.printerControls.retract.addEventListener("click",function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(){n.target.classList="btn btn-light"},null==e.printerControls.extruder.value||""===e.printerControls.extruder.value){t.next=13;break}if(!r.default.selectTool(h,"tool0")){t.next=11;break}return i="-"+(i=e.printerControls.extruder.value),s={command:"extrude",amount:parseInt(i)},t.next=9,r.default.post(h,"printer/tool",s);case 9:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(a,500)):(n.target.classList="btn btn-danger",setTimeout(a,500));case 11:t.next=14;break;case 13:o.default.createAlert("error","You haven't told octoprint how much you'd like to retract...",3e3,"clicked");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.printerControls.printStart.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.disabled=!0,n={command:"start"},r.default.jobAction(h,n,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.printerControls.printPause.addEventListener("click",(function(e){e.target.disabled=!0,r.default.jobAction(h,{command:"pause",action:"pause"},e)})),e.printerControls.printRestart.addEventListener("click",(function(e){e.target.disabled=!0,r.default.jobAction(h,{command:"restart"},e)})),e.printerControls.printResume.addEventListener("click",(function(e){e.target.disabled=!0,r.default.jobAction(h,{command:"pause",action:"resume"},e)})),e.printerControls.printStop.addEventListener("click",(function(e){bootbox.confirm({message:"".concat(h.printerName,": <br>Are you sure you want to cancel the ongoing print?"),buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-check"></i> Confirm'}},callback:function(t){t&&(e.target.disabled=!0,r.default.jobAction(h,{command:"cancel"},e))}})}));var u=function(){var t=b(regeneratorRuntime.mark((function t(n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(a=e.terminal.input.value).toUpperCase(),e.terminal.input.value="",i=function(){e.terminal.sendBtn="btn btn-secondary"},o={commands:[a]},t.next=7,r.default.post(h,"printer/command",o);case 7:204===t.sent.status?(e.terminal.sendBtn="btn btn-success",setTimeout(i,500)):(e.terminal.sendBtn="btn btn-danger",setTimeout(i,500));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.terminal.input.addEventListener("keypress",function(){var e=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"!==t.key||t.shiftKey||u(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.terminal.sendBtn.addEventListener("click",function(){var e=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.fileManager.uploadFiles.addEventListener("change",(function(){o.default.createAlert("warning","Your files for Printer: "+h.printerName+" has begun. Please do not navigate away from this page.",3e3,"Clicked"),s.default.handleFiles(this.files,h)})),e.fileManager.createFolderBtn.addEventListener("click",(function(e){s.default.createFolder(h)})),e.fileManager.fileSearch.addEventListener("keyup",(function(e){s.default.search(h._id)})),e.fileManager.uploadPrintFile.addEventListener("change",(function(){s.default.handleFiles(this.files,h,"print")})),e.fileManager.back.addEventListener("click",(function(e){s.default.openFolder(void 0,void 0,h)})),e.fileManager.syncFiles.addEventListener("click",(function(e){s.default.reSyncFiles(e,h)}))}},{key:"grabPage",value:function(){return{mainPage:{title:document.getElementById("printerSelection"),status:document.getElementById("pmStatus")},jobStatus:{expectedCompletionDate:document.getElementById("pmExpectedCompletionDate"),expectedTime:document.getElementById("pmExpectedTime"),remainingTime:document.getElementById("pmTimeRemain"),elapsedTime:document.getElementById("pmTimeElapsed"),currentZ:document.getElementById("pmCurrentZ"),fileName:document.getElementById("pmFileName"),progressBar:document.getElementById("pmProgress"),expectedWeight:document.getElementById("pmExpectedWeight"),expectedPrinterCost:document.getElementById("pmExpectedPrinterCost"),expectedFilamentCost:document.getElementById("pmExpectedFilamentCost"),expectedTotalCosts:document.getElementById("pmJobCosts"),printerResends:document.getElementById("printerResends"),resendTitle:document.getElementById("resentTitle")},connectPage:{printerPort:document.getElementById("printerPortDrop"),printerBaud:document.getElementById("printerBaudDrop"),printerProfile:document.getElementById("printerProfileDrop"),printerConnect:document.getElementById("printerConnect"),connectButton:document.getElementById("pmConnect"),portDropDown:document.getElementById("pmSerialPort"),baudDropDown:document.getElementById("pmBaudrate"),profileDropDown:document.getElementById("pmProfile")},terminal:{terminalWindow:document.getElementById("terminal"),sendBtn:document.getElementById("terminalInputBtn"),input:document.getElementById("terminalInput")},printerControls:{filamentDrop:document.getElementById("filamentManagerFolderSelect"),fileUpload:document.getElementById("printerManagerUploadBtn"),xPlus:document.getElementById("pcXpos"),xMinus:document.getElementById("pcXneg"),yPlus:document.getElementById("pcYpos"),yMinus:document.getElementById("pcYneg"),xyHome:document.getElementById("pcXYhome"),zPlus:document.getElementById("pcZpos"),zMinus:document.getElementById("pcZneg"),zHome:document.getElementById("pcZhome"),step01:document.getElementById("pcAxisSteps01"),step1:document.getElementById("pcAxisSteps1"),step10:document.getElementById("pcAxisSteps10"),step100:document.getElementById("pcAxisSteps100"),feedRate:document.getElementById("pcFeedRate"),flowRate:document.getElementById("pcFlowRate"),feedRateValue:document.getElementById("pcFeedValue"),flowRateValue:document.getElementById("pcFlowValue"),motorsOff:document.getElementById("pcMotorTog"),fanPercent:document.getElementById("pcFanPercent"),fansOn:document.getElementById("pcFanOn"),fansOff:document.getElementById("pcFanOff"),extruder:document.getElementById("pcExtruder"),extrude:document.getElementById("pcExtrude"),retract:document.getElementById("pcRetract"),progress:document.getElementById("pcAxisSteps100"),printStart:document.getElementById("pmPrintStart"),printPause:document.getElementById("pmPrintPause"),printRestart:document.getElementById("pmPrintRestart"),printResume:document.getElementById("pmPrintResume"),printStop:document.getElementById("pmPrintStop")},fileManager:{printerStorage:document.getElementById("printerStorage"),fileFolderCount:document.getElementById("printerFileCount"),fileSearch:document.getElementById("searchFiles"),uploadFiles:document.getElementById("fileUploadBtn"),uploadPrintFile:document.getElementById("fileUploadPrintBtn"),syncFiles:document.getElementById("fileReSync"),back:document.getElementById("fileBackBtn"),createFolderBtn:document.getElementById("createFolderBtn")},temperatures:{tempTime:document.getElementById("pmTempTime"),bed:document.querySelectorAll("[id^='bed']"),chamber:document.querySelectorAll("[id^='chamber']"),tools:document.querySelectorAll("[id^='tool']")},filamentDrops:document.querySelectorAll("[id$=FilamentManagerFolderSelect]")}}},{key:"applyState",value:(w=b(regeneratorRuntime.mark((function t(n,r){var a,o,s,c,l,d,u,m,f,b,g,v,y,h,w,x,L,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n.fileList&&(r.fileManager.fileFolderCount.innerHTML='<i class="fas fa-file"></i> '.concat(n.fileList.filecount,' <i class="fas fa-folder"></i> ').concat(n.fileList.folderCount)),void 0!==n.storage?r.fileManager.printerStorage.innerHTML='<i class="fas fa-hdd"></i> '.concat(i.default.bytes(n.storage.free)," / ").concat(i.default.bytes(n.storage.total)):r.fileManager.printerStorage.innerHTML='<i class="fas fa-hdd"></i> '.concat(i.default.bytes(0)," / ").concat(i.default.bytes(0)),r.mainPage.status.innerHTML=n.printerState.state,r.mainPage.status.className="btn btn-".concat(n.printerState.colour.name," mb-2"),a=null,o=document.getElementById("fileThumbnail"),void 0!==n.currentJob&&null!=n.currentJob.thumbnail?o.innerHTML!=='<center><img width="50%" src="'.concat(n.printerURL,"/").concat(n.currentJob.thumbnail,'"></center>')&&(o.innerHTML='<center><img width="50%" src="'.concat(n.printerURL,"/").concat(n.currentJob.thumbnail,'"></center>')):""!==o.innerHTML&&(o.innerHTML=""),void 0!==n.currentJob&&null!==n.currentJob.printTimeRemaining?(s=new Date,100===n.currentJob.progress?a="Print Ready for Harvest":(s=s.getTime(),c=new Date(s+1e3*n.currentJob.printTimeRemaining).toDateString(),l=(l=new Date(s+1e3*n.currentJob.printTimeRemaining).toTimeString()).substring(0,8),a=c+": "+l)):a="No Active Print",r.jobStatus.expectedCompletionDate.innerHTML=a,void 0!==n.resends&&null!==n.resends&&(r.jobStatus.printerResends.classList.contains("d-none")&&(r.jobStatus.printerResends.classList.remove("d-none"),r.jobStatus.resendTitle.classList.remove("d-none")),r.jobStatus.printerResends.innerHTML="\n      ".concat(n.resends.count," / ").concat(n.resends.transmitted/1e3,"K (").concat(n.resends.ratio.toFixed(0),")\n      ")),void 0!==n.currentJob&&null!==n.currentJob.progress?(r.jobStatus.progressBar.innerHTML=n.currentJob.progress.toFixed(0)+"%",r.jobStatus.progressBar.style.width=n.currentJob.progress.toFixed(2)+"%"):(r.jobStatus.progressBar.innerHTML="0%",r.jobStatus.progressBar.style.width="0%"),r.jobStatus.expectedTime.innerHTML=i.default.generateTime(n.currentJob.expectedPrintTime),r.jobStatus.remainingTime.innerHTML=i.default.generateTime(n.currentJob.printTimeRemaining),r.jobStatus.elapsedTime.innerHTML=i.default.generateTime(n.currentJob.printTimeElapsed),null===n.currentJob.currentZ?r.jobStatus.currentZ.innerHTML="No Active Print":r.jobStatus.currentZ.innerHTML=n.currentJob.currentZ+"mm",void 0===n.currentJob?(r.jobStatus.fileName.setAttribute("title","No File Selected"),r.jobStatus.fileName.innerHTML="No File Selected"):(r.jobStatus.fileName.setAttribute("title",n.currentJob.filePath),(d=n.currentJob.fileDisplay).length>49&&(d=d.substring(0,49)+"..."),r.jobStatus.fileName.innerHTML=n.currentJob.fileDisplay,u="",m="",null!==n.currentJob.expectedTotals?(u+='<p class="mb-0"><b>Total: </b>'.concat(n.currentJob.expectedTotals.totalLength.toFixed(2),"m / ").concat(n.currentJob.expectedTotals.totalWeight.toFixed(2),"g</p>"),r.jobStatus.expectedTotalCosts.innerHTML=n.currentJob.expectedTotals.totalCost):(u="No File Selected",r.jobStatus.expectedTotalCosts.innerHTML="No File Selected"),"object"===p(n.currentJob.expectedFilamentCosts)?null!==n.currentJob.expectedFilamentCosts?(n.currentJob.expectedFilamentCosts.forEach((function(e){var t=Object.keys(e)[0];u+='<p class="mb-0"><b>'.concat(e[t].toolName,": </b>").concat(e[t].length.toFixed(2),"m / ").concat(e[t].weight.toFixed(2),"g</p>")})),m+='<p class="mb-0"><b>Total: </b>'.concat(n.currentJob.expectedTotals.spoolCost.toFixed(2),"</p>"),n.currentJob.expectedFilamentCosts.forEach((function(e){var t=Object.keys(e)[0];m+='<p class="mb-0"><b>'.concat(e[t].toolName,": </b>").concat(e[t].cost,"</p>")}))):m="No length estimate":m="No File Selected",r.jobStatus.expectedWeight.innerHTML=u,r.jobStatus.expectedFilamentCost.innerHTML=m,f=n.currentJob.expectedPrinterCosts,r.jobStatus.expectedPrinterCost.innerHTML=f),"Active"===n.printerState.colour.category?(e.controls(!0,!0),r.printerControls.printStart.disabled=!0,r.printerControls.printStart.style.display="inline-block",r.printerControls.printPause.disabled=!1,r.printerControls.printPause.style.display="inline-block",r.printerControls.printStop.disabled=!1,r.printerControls.printStop.style.display="inline-block",r.printerControls.printRestart.disabled=!0,r.printerControls.printRestart.style.display="none",r.printerControls.printResume.disabled=!0,r.printerControls.printResume.style.display="none"):"Idle"===n.printerState.colour.category||"Complete"===n.printerState.colour.category?(e.controls(!1),r.connectPage.connectButton.value="disconnect",r.connectPage.connectButton.innerHTML="Disconnect",r.connectPage.connectButton.classList="btn btn-danger inline",r.connectPage.connectButton.disabled=!1,r.connectPage.printerPort.disabled=!0,r.connectPage.printerBaud.disabled=!0,r.connectPage.printerProfile.disabled=!0,void 0!==n.job&&"No File Selected"===n.job.filename?(r.printerControls.printStart.disabled=!0,r.printerControls.printStart.style.display="inline-block",r.printerControls.printPause.disabled=!0,r.printerControls.printPause.style.display="inline-block",r.printerControls.printStop.disabled=!0,r.printerControls.printStop.style.display="inline-block",r.printerControls.printRestart.disabled=!0,r.printerControls.printRestart.style.display="none",r.printerControls.printResume.disabled=!0,r.printerControls.printResume.style.display="none"):"Paused"===n.printerState.state?(e.controls(!1),r.printerControls.printStart.disabled=!0,r.printerControls.printStart.style.display="none",r.printerControls.printPause.disabled=!0,r.printerControls.printPause.style.display="none",r.printerControls.printStop.disabled=!1,r.printerControls.printStop.style.display="inline-block",r.printerControls.printRestart.disabled=!1,r.printerControls.printRestart.style.display="inline-block",r.printerControls.printResume.disabled=!1,r.printerControls.printResume.style.display="inline-block"):(r.printerControls.printStart.disabled=!1,r.printerControls.printStart.style.display="inline-block",r.printerControls.printPause.disabled=!0,r.printerControls.printPause.style.display="inline-block",r.printerControls.printStop.disabled=!0,r.printerControls.printStop.style.display="inline-block",r.printerControls.printRestart.disabled=!0,r.printerControls.printRestart.style.display="none",r.printerControls.printResume.disabled=!0,r.printerControls.printResume.style.display="none")):"Offline"!==n.printerState.colour.category&&"Disconnected"!==n.printerState.colour.category||("Error!"===n.printerState.state&&(document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1),r.connectPage.connectButton.value="connect",r.connectPage.connectButton.innerHTML="Connect",r.connectPage.connectButton.classList="btn btn-success inline",r.connectPage.connectButton.disabled=!1,e.controls(!0),r.printerControls.printStart.disabled=!0,r.printerControls.printStart.style.display="inline-block",r.printerControls.printPause.disabled=!0,r.printerControls.printPause.style.display="inline-block",r.printerControls.printStop.disabled=!0,r.printerControls.printStop.style.display="inline-block",r.printerControls.printRestart.disabled=!0,r.printerControls.printRestart.style.display="none",r.printerControls.printResume.disabled=!0,r.printerControls.printResume.style.display="none","Offline"!==n.printerState.state.category&&"Shutdown"!==n.state&&"Searching..."!==n.state||$("#printerManagerModal").modal("hide")),b=r.terminal.terminalWindow.scrollHeight-r.terminal.terminalWindow.clientHeight<=r.terminal.terminalWindow.scrollTop+1,r.terminal.terminalWindow.innerHTML="",void 0!==n.terminal)for(g=document.getElementById("waitMessages").checked,v=document.getElementById("tempMessages").checked,y=document.getElementById("sdMessages").checked,h=0;h<n.terminal.length;h++)w=/(Send: (N\d+\s+)?M105)|(Recv:\s+(ok\s+)?.*(B|T\d*):\d+)/,x=/(Send: (N\d+\s+)?M27)|(Recv: SD printing byte)/,L=/Recv: Not SD printing/,E=/Recv: wait/,n.terminal[h].match(w)?v?r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine temperatureMessage">').concat(n.terminal[h],"</div>\n        ")):r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine temperatureMessage d-none">').concat(n.terminal[h],"</div>\n        ")):n.terminal[h].match(x)||n.terminal[h].match(L)?y?r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine sdMessage">').concat(n.terminal[h],"</div>\n        ")):r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine sdMessage d-none">').concat(n.terminal[h],"</div>\n        ")):n.terminal[h].match(E)?g?r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine waitMessage">').concat(n.terminal[h],"</div>\n        ")):r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine waitMessage d-none">').concat(n.terminal[h],"</div>\n        ")):r.terminal.terminalWindow.insertAdjacentHTML("beforeend",'\n          <div id="logLine'.concat(h,'" class="logLine">').concat(n.terminal[h],"</div>\n        "));b&&(r.terminal.terminalWindow.scrollTop=r.terminal.terminalWindow.scrollHeight-r.terminal.terminalWindow.clientHeight);case 21:case"end":return t.stop()}}),t)}))),function(e,t){return w.apply(this,arguments)})},{key:"applyTemps",value:(f=b(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.tools&&(r=t.tools[0],n.temperatures.tempTime.innerHTML='Updated: <i class="far fa-clock"></i> '+new Date(1e3*r.time).toTimeString().substring(1,8),null!==r.bed.actual&&(n.temperatures.bed[0].innerHTML=r.bed.actual+"Â°C",n.temperatures.bed[1].placeholder=r.bed.target+"Â°C"),null!==r.chamber.actual&&(n.temperatures.chamber[0].innerHTML=r.chamber.actual+"Â°C",n.temperatures.chamber[1].placeholder=r.chamber.target+"Â°C"),Object.keys(r).reverse().forEach((function(e){e.includes("tool")&&n.temperatures.tools.forEach((function(t){t.id.includes(e)&&t.id.includes("Actual")&&(t.innerHTML=r[e].actual+"Â°C"),t.id.includes(e)&&t.id.includes("Target")&&(t.placeholder=r[e].target+"Â°C")}))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"controls",value:(u=b(regeneratorRuntime.mark((function t(n,r){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.grabPage();case 2:a=t.sent,i=a.filamentDrops,a=a.printerControls,void 0!==r&&r?(a.feedRate.disabled=!r,a.flowRate.disabled=!r,a.fansOn.disabled=!r,a.fansOff.disabled=!r,i.forEach((function(e){e.disabled=r}))):(a.feedRate.disabled=n,a.flowRate.disabled=n,a.fansOn.disabled=n,a.fansOff.disabled=n,i.forEach((function(e){e.disabled=n}))),a.xPlus.disabled=n,a.xMinus.disabled=n,a.yPlus.disabled=n,a.yMinus.disabled=n,a.xyHome.disabled=n,a.zPlus.disabled=n,a.zMinus.disabled=n,a.zHome.disabled=n,a.step01.disabled=n,a.step1.disabled=n,a.step10.disabled=n,a.step100.disabled=n,a.motorsOff.disabled=n,a.extrude.disabled=n,a.retract.disabled=n;case 21:case"end":return t.stop()}}),t)}))),function(e,t){return u.apply(this,arguments)})}],n&&g(t.prototype,n),d&&g(t,d),e}();n.default=w},{"../functions/calc.js":2,"../functions/ui.js":5,"../modules/fileSorting.js":12,"../octofarm.js":18,"../octoprint.js":19,"./filamentGrab.js":10,"./fileManager.js":11,"./powerButton.js":13}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../octofarm.js")),a=i(e("../functions/ui.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i,c,l;return t=e,n=null,i=[{key:"getSelectableList",value:function(e){return'\n                       <tr id="'.concat(e.id,'" class="').concat(e.state,'" data-jplist-item>\n                          <td>\n                                <div class="custom-control custom-checkbox">\n                                  <input type="checkbox" class="custom-control-input Idle" id="checkBox-').concat(e.id,'" value="').concat(e.id,'">\n                                  <label class="custom-control-label" for="checkBox-').concat(e.id,'"></label>\n                                </div>\n                          </td>\n                          <th scope="row">').concat(e.index,"</th>\n                          <td>").concat(e.name,'</td>\n                          <td class="').concat(e.state,'">').concat(e.state,'</td>\n                          <td class="').concat(e.group.replace(/\s/g,"_"),'">').concat(e.group,"</td>\n                          <td>").concat(e.spool,"</td>\n                        </tr>\n                ")}},{key:"getEditableList",value:function(e){return'\n                       <tr id="editPrinterCard-'.concat(e.id,'" class="').concat(e.state,'" data-jplist-item>\n                          <th scope="row">').concat(e.index,'</th>\n                          <td><input id="editInputName-').concat(e.id,'" type="text" class="form-control Idle" placeholder="').concat(e.name,'" aria-label="Username" aria-describedby="basic-addon1"></td>\n                          <td><input id="editInputURL-').concat(e.id,'" type="text" class="form-control Idle" placeholder="').concat(e.printerURL,'" aria-label="Username" aria-describedby="basic-addon1"></td>\n                          <td class="').concat(e.state,' d-none">').concat(e.state,'</td>\n                          <td class="').concat(e.group.replace(/\s/g,"_"),'"><input id="editInputGroup-').concat(e.id,'" type="text" class="form-control Idle" placeholder="').concat(e.group,'" aria-label="Username" aria-describedby="basic-addon1"></td>\n                          <td><input id="editInputCamera-').concat(e.id,'" type="text" class="form-control Idle" placeholder="').concat(e.cameraURL,'" aria-label="Username" aria-describedby="basic-addon1"></td>\n                          <td><input id="editInputApikey-').concat(e.id,'" type="text" class="form-control Idle" placeholder="').concat(e.apikey,'" aria-label="Username" aria-describedby="basic-addon1"></td>\n                        </tr>\n                ')}},{key:"isOffline",value:function(e,t,n){return!!t||!!n||"Offline"!==e}},{key:"create",value:(c=regeneratorRuntime.mark((function t(n,a,i,o){var s,c,l,d,u,p,m,f,b,g,v=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=document.getElementById("saveEditsBtn"))&&s.remove(),i&&(document.getElementById("printerEditLabel").innerHTML=i),n.innerHTML="",n.innerHTML='\n<div class="row">\n    <div class="col-lg-12">\n      <div class="pb-2" id="selectMessageBox"></div>\n    </div>\n    <div class="col-md-3">\n                       <div class="input-group mb-3">\n                            <div class="input-group-prepend">\n                                <label class="input-group-text" for="printerStateList">State: </label>\n                            </div>\n                            <select class="custom-select" id="printerStateList"\n                                    data-jplist-control="select-filter"\n                                    data-group="printer-list"\n                                    data-name="state"\n                            >\n                                <option selected\n                                         href="#"\n                                        data-value="all"\n                                        data-path="default"\n                                >Filter</option>\n                                    <option \n                                            href="#"\n                                            value="active"\n                                            data-path=".Active">Active</option>\n                                    <option \n                                            href="#"\n                                            value="idle"\n                                            data-path=".Idle">Idle</option>\n                                    <option \n                                            href="#"\n                                            value="complete"\n                                            data-path=".Complete">Complete</option>\n                                    <option \n                                             href="#"\n                                            value="disconnected"\n                                            data-path=".Disconnected">Disconnected</option>\n                            </select>\n                        </div>\n    </div>\n    <div class="col-md-3">\n                         <div class="input-group mb-3">\n                            <div class="input-group-prepend">\n                                <label class="input-group-text" for="printerGroupList">Group: </label>\n                            </div>\n                            <select class="custom-select" id="printerGroupList"\n                                    data-jplist-control="select-filter"\n                                    data-group="printer-list"\n                                    data-name="group"\n                            >\n                            </select>\n                        </div>\n    </div>\n    <div id="selectBtns" class="col-md-3 text-center">\n\n    </div>\n    <div id="actionBtn" class="col-md-3  text-center">\n              \n    </div>\n\n</div>\n<table class="table table-dark">\n  <thead>\n    <tr>\n      <th id="selectColumn" scope="col">Select</th>\n      <th scope="col">Index</th>\n      <th scope="col">Name</th>\n      <th scope="col" id="urlColumn" class="d-none">Printer URL</th>\n      <th id="stateColumn" scope="col">State</th>\n      <th scope="col">Group</th>\n      <th id="spoolColumn" scope="col">Spool</th>\n      <th id="cameraColumn" scope="col" class="d-none">Camera URL</th>\n      <th id="apiColumn" scope="col" class="d-none">API KEY</th>\n    </tr>\n  </thead>\n  <tbody id="printerSelectBody" data-jplist-group="printer-list">\n\n  </tbody>\n</table>\n',(c=document.getElementById("selectMessageBox")).innerHTML="",l=!1,"Printer Deletion"===i?(l=!0,c.innerHTML='\n<div class="alert alert-info" role="alert">\nSelect which printers you\'d like to delete. Press action when you have selected all the printers you\'d like to remove.\n</div>\n<div class="alert alert-danger" role="alert">\n This is unrecoverable! If you remove the database entry for your printer, any links in the database will be lost... i.e. History/Statistics. Unless you have a backup in place.\n</div>\n'):"Edit Printers"===i?c.innerHTML='\n<div class="alert alert-info" role="alert">\nUpdate any of the printer values below and press action when you\'ve made your changes.\n</div>\n<div class="alert alert-warning" role="alert">\n OctoFarm will then update only the changed printers.\n</div>\n':"Disconnect Printers"===i?c.innerHTML='\n<div class="alert alert-info" role="alert">\nPlease select which printers you\'d like to disconnect from OctoPrint.\n</div>\n<div class="alert alert-warning" role="alert">\nThis will by default skip Active printers. This is not an emergency stop button!\n</div>\n\n':"Connect Printers"===i?c.innerHTML='\n<div class="alert alert-info" role="alert">\nPlease select which printers you\'d like to connect to from OctoPrint. Selected printers will attempt a connection with the preferred port settings from OctoPrint.\n</div>\n<div class="alert alert-warning" role="alert">\nThis can be updated in your printer settings on OctoFarm/OctoPrint. You will need to re-scan for OctoFarm to detect the changes if updated on OctoPrint.\n</div>\n<div class="alert alert-danger" role="alert">\n If this doesn\'t exist the connection attempt will fall back to AUTO and could fail/put your printer in an error state. \n</div>\n':"Install Plugins"===i?c.innerHTML='\n<div class="alert alert-info" role="alert">\nPlease select which printers you\'d like to action a plugin installation on... You will be able to choose multiple plugins on the next pop up.\n</div>\n<div class="alert alert-warning" role="alert">\n  Your plugin installation will be skipped if it\'s already installed...\n</div>\n':"Power On/Off Printers"===i&&(c.innerHTML='\n<div class="alert alert-info" role="alert">\nPlease select your list of printers to action the power command on. You will be able to choose the actual command on the next pop up.\n</div>\n<div class="alert alert-danger" role="alert">\n  These commands will run without user interaction... It will skip by default any active printers.\n</div>\n'),t.next=11,r.default.post("printers/printerInfo");case 11:return d=t.sent,t.next=14,d.json();case 14:u=t.sent,p=[],m=[],u.forEach((function(e){if(void 0!==e.printerState&&v.isOffline(e.printerState.colour.category,a,l)){var t="";0!==e.selectedFilament.length?e.selectedFilament.forEach((function(e,n){t+=null!==e?"Tool ".concat(n,": ").concat(e.spools.name," - ").concat(e.spools.material," <br>"):"Tool ".concat(n,": No Spool Selected <br>")})):t="No Spool Selected";var n={id:e._id,index:e.sortIndex,name:e.printerName,printerURL:e.printerURL,state:e.printerState.colour.category,group:e.group,spool:t,cameraURL:e.cameraURL,apikey:e.apikey};m.push(n)}if(""!==e.group){var r={display:e.group,tag:e.group.replace(/\s/g,"_")};p.push(r)}})),f=_.uniq(p,"tag"),0!==m.length?(b=document.getElementById("printerSelectBody"),a?(document.getElementById("spoolColumn").classList.add("d-none"),document.getElementById("stateColumn").classList.add("d-none"),document.getElementById("cameraColumn").classList.remove("d-none"),document.getElementById("apiColumn").classList.remove("d-none"),document.getElementById("selectColumn").classList.add("d-none"),document.getElementById("urlColumn").classList.remove("d-none"),m.forEach((function(e){b.insertAdjacentHTML("beforeend",v.getEditableList(e))}))):m.forEach((function(e){b.insertAdjacentHTML("beforeend",v.getSelectableList(e))})),(g=document.getElementById("printerGroupList")).innerHTML="",g.insertAdjacentHTML("beforeend",'\n                                  <option selected\n                                        value="all"\n                                        data-path="default"\n                                >Filter</option>\n            '),f.forEach((function(e,t){g.insertAdjacentHTML("beforeend",'\n                                                        <option\n                                                        value="'.concat(e.tag.toLowerCase(),'"\n                                                        data-path=".').concat(e.tag,'">').concat(e.display,"</option>\n                "))}))):document.getElementById("printerSelectBody").insertAdjacentHTML("beforeend","<tr><td>No Online Printers</td></tr>"),e.addListeners(a,o);case 21:case"end":return t.stop()}}),t)})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=c.apply(e,t);function i(e){o(a,n,r,i,s,"next",e)}function s(e){o(a,n,r,i,s,"throw",e)}i(void 0)}))},function(e,t,n,r){return l.apply(this,arguments)})},{key:"addListeners",value:function(e,t){e?a.default.addSelectListeners("editInput"):(document.getElementById("selectBtns").innerHTML='\n                    <button id="selectAll" type="button" class="btn btn-secondary"><i class="fas fa-check-square"></i> Select All</button>\n                    <button id="selectNone" type="button" class="btn btn-secondary"><i class="fas fa-square"></i> Deselect All</button>\n            ',document.getElementById("selectAll").addEventListener("click",(function(e){document.querySelectorAll('input[type="checkbox"]:not(:checked)').forEach((function(e){e.checked=!0}))})),document.getElementById("selectNone").addEventListener("click",(function(e){document.querySelectorAll('input[type="checkbox"]:checked').forEach((function(e){e.checked=!1}))}))),t&&(document.getElementById("actionBtn").insertAdjacentHTML("beforeend",'\n                      <button id="saveEditsBtn" class="btn btn-success" data-dismiss="modal" aria-label="Close">Action</button>\n      '),document.getElementById("saveEditsBtn").addEventListener("click",t)),jplist.init()}},{key:"getSelected",value:function(){var e=document.querySelectorAll('input[type="checkbox"]:checked'),t=[];return e.forEach((function(e){e.id.includes("checkBox")&&t.push(e)})),t}},{key:"selectFilter",value:function(){}}],n&&s(t.prototype,n),i&&s(t,i),e}();n.default=c},{"../functions/ui.js":5,"../octofarm.js":18}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkTemps=function(e,t,n,r,a){t=parseFloat(t),n=parseFloat(n),isNaN(t)&&(t=0);isNaN(n)&&(n=0);if("Complete"===a)if(t>parseFloat(r.coolDown)){var i='<i class="far fa-circle toolUnder"></i> '.concat(t,'Â°C <i class="fas fa-bullseye"></i> ').concat(n,"Â°C");e.innerHTML!==i&&(e.innerHTML=i)}else{var o='<i class="far fa-circle toolUnder"></i> '.concat(t,'Â°C <i class="fas fa-bullseye toolUnder"></i> ').concat(n,"Â°C");e.innerHTML!==o&&(e.innerHTML=o)}else if("Active"===a)if(t>n-parseFloat(r.heatingVariation)&&t<n+parseFloat(r.heatingVariation)){var s='<i class="far fa-circle toolOn"></i> '.concat(t,'Â°C <i class="fas fa-bullseye toolOn"></i> ').concat(n,"Â°C");e.innerHTML!==s&&(e.innerHTML=s)}else if(t<parseFloat(r.heatingVariation)){var c='<i class="far fa-circle"></i> '.concat(t,'Â°C <i class="fas fa-bullseye"></i> ').concat(n,"Â°C");e.innerHTML!==c&&(e.innerHTML=c)}else{var l='<i class="far fa-circle toolOut"></i> '.concat(t,'Â°C <i class="fas fa-bullseye toolOut"></i> ').concat(n,"Â°C");e.innerHTML!==l&&(e.innerHTML=l)}else{var d='<i class="far fa-circle"></i> '.concat(t,'Â°C <i class="fas fa-bullseye"></i> ').concat(n,"Â°C");e.innerHTML!==d&&(e.innerHTML=d)}}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=P;var r=e("../functions/dragAndDrop.js"),a=b(e("./printerManager.js")),i=b(e("./powerButton.js")),o=b(e("../functions/ui.js")),s=b(e("../functions/calc.js")),c=e("./Printers/actionButtons.js"),l=b(e("../octoprint.js")),d=e("../modules/temperatureCheck.js"),u=e("./filamentGrab.js"),p=b(e("./currentOperations")),m=b(e("../functions/fullscreen.js")),f=b(e("../octofarm"));function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){g(i,r,a,o,s,"next",e)}function s(e){g(i,r,a,o,s,"throw",e)}o(void 0)}))}}var y=[],h=2e4,w=null,x=null,L=null,E=!1,k=document.getElementById("printerManagerModal"),S=document.getElementById("printerArea"),T=null;document.addEventListener("visibilitychange",(function(){document.hidden?null!==L&&(console.log("Screen Abandonded, closing web worker..."),L.terminate(),L=null):null===L&&(console.log("Screen resumed... opening web worker..."),P(T))}),!1),document.getElementById("filterStates").addEventListener("change",(function(e){f.default.get("client/updateFilter/"+e.target.value)})),document.getElementById("sortStates").addEventListener("change",(function(e){f.default.get("client/updateSorting/"+e.target.value)}));var B=function(e){if(void 0!==e){var t=_.findIndex(w,(function(t){return t._id==e}));return w[t]}return w};function P(e){T=e,(L=new Worker("/assets/js/workers/monitoringViewsWorker.min.js")).onmessage=function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==t.data){e.next=7;break}return w=t.data.printersInformation,x=t.data.printerControlList,E||(E=document.getElementById("printerManagerModal")),e.next=6,D(t.data.printersInformation,t.data.clientSettings,T);case 6:t.data.clientSettings.panelView.currentOp&&(n=t.data.currentOperations,(0,p.default)(n.operations,n.count,w));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function C(e,t){var n="";return("Offline"===e&&t.panel.hideOff||"Disconnected"===e&&t.panel.hideClosed)&&(n="hidden"),n}function I(e){var t=e;return t.includes("http://")?t=t.replace("http://",""):t.includes("https://")&&(t=t.replace("https://","")),t}function R(e){return void 0!==e&&void 0!==e.panelView&&void 0!==e.panelView.printerRows?e.panelView.printerRows:2}function M(e){var t=function(t){var n=t.url,r=t.flipV,a=t.flipH,i=t.rotate90;return'<img\n        loading="lazy"\n        class="camImg"\n        id="camera-'.concat(e._id,'"\n        width="100%"\n        style="transform: ').concat(a," ").concat(r," ").concat(i,'";\n        src="').concat(n,'"\n    />')},n=function(e){var t="",n="",r="";return null!==e.webCamSettings&&(e.webCamSettings.flipH&&(t="rotateY(180deg)"),e.webCamSettings.flipV&&(n="rotateX(180deg)"),e.webCamSettings.rotate90&&(r="rotate(90deg)")),{flipH:t,flipV:n,rotate90:r}}(e.otherSettings),r=n.flipH,a=n.flipV,i=n.rotate90;return null!==e.otherSettings&&null!==e.otherSettings.webCamSettings&&e.otherSettings.webCamSettings.webcamEnabled?""!==e.cameraURL?t({url:e.cameraURL,flipV:a,flipH:r,rotate90:i}):void 0!==e.currentJob&&null!=e.currentJob.thumbnail?t({url:e.printerURL+"/"+e.currentJob.thumbnail,flipV:a,flipH:r,rotate90:i}):t({url:"../images/noCamera.jpg",flipV:a,flipH:r,rotate90:i}):void 0!==e.currentJob&&null!=e.currentJob.thumbnail?t({url:e.printerURL+"/"+e.currentJob.thumbnail,flipV:a,flipH:r,rotate90:i}):t({url:"",flipV:a,flipH:r,rotate90:i})}function F(e,t){var n=C(e,t),r=I(e.printerName),a="",i="";if(null!==e.currentProfile){for(var o=0;o<e.currentProfile.extruder.count;o++)a+='<div class="btn-group btn-block m-0" role="group" aria-label="Basic example">',a+='<button type="button" class="btn btn-secondary btn-sm" disabled><b>Tool '.concat(o,' </b></button><button disabled id="').concat(e._id,"-spool-").concat(o,'" type="button" class="btn btn-secondary  btn-sm"> No Spool </button><button id="').concat(e._id,"-temperature-").concat(o,'" type="button" class="btn btn-secondary btn-sm" disabled><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</button>'),a+="</div>";e.currentProfile.heatedBed&&e.currentProfile.heatedChamber?i='<small\n      id="bedTemp-'.concat(e._id,'"\n    class="mb-0 float-right"\n\n          </small><br><small\n      id="chamberTemp-').concat(e._id,'"\n    class="mb-0 float-right"\n\n          </small>'):e.currentProfile.heatedBed?i='<div\n      id="badTemp-'.concat(e._id,'"\n    class="mb-0 float-left"\n          >\n          </div>'):e.currentProfile.heatedChamber&&(i='<div\n      id="chamberTemp-'.concat(e._id,'"\n    class="mb-0 float-right"\n        >\n          </div>'))}var s=e.printerState.colour.category;return"Error!"===s&&(s="Offline"),'\n        <tr\n          class="p-0 '.concat(s," ").concat(n,'"\n          id="panel-').concat(e._id,'">\n          <td id="name-').concat(e._id,'" class="py-auto">\n            ').concat(r,'\n          </td>\n          <td id="state-').concat(e._id,'" class="py-auto">\n           ').concat(e.printerState.state,'\n          </td>\n          <td id="printerActionBtns-').concat(e._id,'" class="py-auto">\n\n          </td>\n          <td class="py-auto">\n            <button title="Start your current selected file"\n              id="play-').concat(e._id,'"\n              type="button"\n              class="tag btn btn-success btn-sm"\n              disabled\n            >\n              <i class="fas fa-play"></i>\n            </button>\n            <button title="Cancel your current print"\n              id="cancel-').concat(e._id,'"\n              type="button"\n              class="tag btn btn-danger btn-sm"\n              disabled\n            >\n              <i class="fas fa-square"></i>\n            </button>\n          </td>\n          <td class="py-auto">\n          <p id="currentFile-').concat(e._id,'" title="Loading..." class="mb-1 tag">\n            <i class="fas fa-file-code"></i> No File Selected </p>\n          </td>\n          <td class="p-1">\n          <span id="printTimeElapsed-').concat(e._id,'">Loading...</span>\n          </td>\n          <td class="py-auto">\n            <div class="progress m-0 p-0">\n              <div id="progress-').concat(e._id,'" class="progress-bar progress-bar-striped bg-secondary percent" role="progressbar progress-bar-striped" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>\n            </div>\n          </td>\n          <td class="p-1">\n          <span id="remainingTime-').concat(e._id,'">\n                Loading...\n            </span>\n          </td>\n          <td class="py-auto">\n           ').concat(a,'\n          </td>\n          <td class="py-auto">\n            ').concat(i,"\n          </td>\n        </tr>\n    ")}function A(e,t){var n=C(e,t),r=I(e.printerName),a=(R(t),M(e)),i="",o="";if(null!==e.currentProfile){for(var s=0;s<e.currentProfile.extruder.count;s++)i+='<div class="btn-group btn-block m-0" role="group" aria-label="Basic example">',i+='<button type="button" class="btn btn-secondary btn-sm" disabled><b>Tool '.concat(s,' </b></button><button disabled id="').concat(e._id,"-spool-").concat(s,'" type="button" class="btn btn-secondary  btn-sm"> No Spool </button><button id="').concat(e._id,"-temperature-").concat(s,'" type="button" class="btn btn-secondary btn-sm" disabled><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</button>'),i+="</div>";e.currentProfile.heatedBed&&(o+='<small\n    class="mb-0 float-left"\n          ><b>Bed: </b><span id="badTemp-'.concat(e._id,'"><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</span>\n          </small>')),e.currentProfile.heatedChamber&&(o+='<small\n    class="mb-0 float-right"\n        ><b>Chamber: </b><span  id="chamberTemp-'.concat(e._id,'"><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</span>\n          </small>'))}return'\n        <div class="col-sm-12 col-md-4 col-lg-3 col-xl-2 '.concat(n,'" id="panel-').concat(e._id,'">\n        <div class="card mt-1 mb-1 ml-1 mr-1 text-center">\n          <div class="card-header dashHeader">\n           <button\n                id="name-').concat(e._id,'"\n                type="button"\n                class="btn btn-secondary mb-0 btn-sm float-left"\n                role="button"\n                disabled\n              >\n                ').concat(r,'\n              </button>\n          <small class="float-right" id="printerActionBtns-').concat(e._id,'">\n\n          </small>\n          </div>\n          <div class="card-body pt-1 pb-0 pl-2 pr-2">\n            <div class="d-none index">').concat(e.sortIndex,'</div>\n            <button\n                    id="currentFile-').concat(e._id,'"\n                    type="button"\n                    class="tag btn btn-block btn-secondary mb-0 text-truncate btn-sm"\n                    role="button"\n                    title="Loading..."\n                    disabled\n            >\n                <i class="fas fa-file-code" ></i> No File Selected\n            </button>\n            <div id="cameraContain-').concat(e._id,'" class="noBlue">\n                ').concat(a,'\n            </div>\n            <div class="progress">\n              <div\n                id="progress-').concat(e._id,'"\n                class="progress-bar progress-bar-striped bg-').concat(e.printerState.colour.name,' percent"\n                role="progressbar progress-bar-striped"\n                style="width: 0%"\n                aria-valuenow="0"\n                aria-valuemin="0"\n                aria-valuemax="100"\n              >\n                0%\n              </div>\n            </div>\n            <button\n              id="state-').concat(e._id,'"\n              type="button"\n              class="btn btn-block mb-1 mt-1 btn-sm ').concat(e.printerState.colour.category,'"\n              role="button"\n              disabled\n            >\n              ').concat(e.printerState.state,'\n            </button>\n            <center>\n              <button\n                title="Start your currently selected print"\n                id="play-').concat(e._id,'"\n                type="button"\n                class="tag btn btn-success mt-1 mb-1 btn-sm"\n                role="button"\n                disabled\n              >\n                <i class="fas fa-print"></i> Print\n              </button>\n              <button\n                      title="Pause your current print"\n                id="pause-').concat(e._id,'"\n                type="button"\n                class="tag btn btn-light mt-1 mb-1 btn-sm"\n                role="button"\n                disabled\n              >\n                <i class="fas fa-pause"></i> Pause\n              </button>\n              <button\n                title="Restart your current print"\n                id="restart-').concat(e._id,'"\n                type="button"\n                class="tag btn btn-danger mt-1 mb-1 hidden btn-sm"\n                role="button"\n                disabled\n              >\n                <i class="fas fa-undo"></i> Restart\n              </button>\n              <button\n                      title="Resume your current print"\n                id="resume-').concat(e._id,'"\n                type="button"\n                class="tag btn btn-success mt-1 mb-1 hidden btn-sm"\n                role="button"\n                disabled\n              >\n                <i class="fas fa-redo"></i> Resume\n              </button>\n              <button\n                      title="Stop your current print"\n                id="cancel-').concat(e._id,'"\n                type="button"\n                class="tag btn btn-danger mt-1 mb-1 btn-sm"\n                role="button"\n                disabled\n              >\n                <i class="fas fa-square"></i> Cancel\n              </button>\n            </center>\n          </div>\n          <div class="row">\n            <div class="col-6">\n                       <span id="printTimeElapsed-').concat(e._id,'">Loading...</span>\n            </div>\n            <div class="col-6">\n                      <span id="remainingTime-').concat(e._id,'">\n                Loading...\n            </span>\n            </div> \n\n          </div>\n          <div\n            id="listFilament-').concat(e._id,'" disabled\n            class="bg-dark"\n          >\n           ').concat(i,'\n          </div>\n\n          <div class="card-footer text-muted dashFooter">\n                ').concat(o,"\n          </div>\n        </div>\n      </div>\n    ")}function j(e,t){var n=C(e,t);""===e.cameraURL&&(n="hidden");var r=I(e.printerName),a=R(t),i=M(e),o="",s="";if(null!==e.currentProfile){for(var c=0;c<e.currentProfile.extruder.count;c++)o+="<span><b>Tool ".concat(c,' </b></span> | <span id="').concat(e._id,"-spool-").concat(c,'"> No Spool </span> | <span id="').concat(e._id,"-temperature-").concat(c,'" ><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</span><br>');e.currentProfile.heatedBed&&(s+='\n          <b>Bed: </b><span id="badTemp-'.concat(e._id,'"><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</span><br>\n')),e.currentProfile.heatedChamber&&(s+='\n    class="mb-0"\n        <b>Chamber: </b><span id="chamberTemp-'.concat(e._id,'"><i class="far fa-circle "></i> 0Â°C <i class="fas fa-bullseye"></i> 0Â°C</span><br>\n '))}return'\n  <div\n      id="panel-'.concat(e._id,'"\n      class="col-md-4 col-lg-').concat(a," col-xl-").concat(a," ").concat(n,'"\n    >\n      <div class="card text-center mb-0 mt-0 ml-0 mr-0">\n        <div\n          class="card-header dashHeader p-0"\n          id="camHeader-').concat(e._id,'"\n        >\n            <button\n              id="name-').concat(e._id,'"\n              type="button"\n              class="btn btn-secondary float-left p-0 pl-2 pt-1"\n              data-toggle="modal"\n              data-target="#printerManagerModal"\n              disabled\n            >\n                ').concat(r,'\n            </button>\n          <small id="printerActionBtns-').concat(e._id,'" class="float-right">\n          </small>\n        </div>\n        <div\n          class="card-body cameraContain text-truncate noBlue"\n          id="cameraContain-').concat(e._id,'"\n        >\n          <div class="camName">\n            <small\n              class="mb-0 text-center"\n              id="currentFile-').concat(e._id,'"\n            >\n              <i class="fas fa-file-code"></i> Loading... \n            </small><br>\n          </div>\n          \n          <div class="camExtra">\n            <div class=" row">\n\n              <div class="col-6">\n                 <span\n                    class="mb-0 text-center"\n                    id="printTimeElapsed-').concat(e._id,'"\n                  >\n\n                  </span>\n              </div>\n              <div class="col-6">\n                          <span\n              class="mb-0 text-center"\n              id="remainingTime-').concat(e._id,'"\n            >\n\n            </span>\n              </div>\n                          \n</div>\n          </div>\n                ').concat(i,'\n          <div class="camTemps">\n            <small\n              id="toolTemps-').concat(e._id,'"\n              class="mb-0 text-center"\n            >\n             ').concat(o,"\n             ").concat(s,'\n            </small>\n          </div>\n          <div class="progress camProgress">\n            <div class="d-none percent">Loading...</div>\n            <div\n              id="progress-').concat(e._id,'"\n              class="progress-bar progress-bar-striped bg-').concat(e.printerState.colour.category,' percent"\n              role="progressbar"\n              style="width: 0%"\n              aria-valuenow="10"\n              aria-valuemin="0"\n              aria-valuemax="100"\n            >\n            0%\n            </div>\n          </div>\n          <small>\n            <button\n              title="Start your current selected print"\n              class="tag btn btn-success camButtons hidden btn-sm"\n              id="play-').concat(e._id,'"\n            >\n              Start\n            </button>\n            <button\n              title="Stop your current selected print"\n              class="tag btn btn-danger camButtons btn-sm"\n              id="cancel-').concat(e._id,'"\n            >\n              Cancel\n            </button>\n          </small>\n        </div>\n      </div>\n    </div>\n  ')}function H(e){document.getElementById("printerButton-".concat(e._id)).addEventListener("click",(function(){a.default.init(e._id,w,x)}));var t=document.getElementById("play-"+e._id);t&&t.addEventListener("click",(function(t){t.target.disabled=!0;var n=B(e._id);l.default.jobAction(n,{command:"start"},t)}));var n=document.getElementById("cancel-"+e._id);n&&n.addEventListener("click",(function(t){var n=B(e._id),r=e.printerName;bootbox.confirm({message:"".concat(r,": <br>Are you sure you want to cancel the ongoing print?"),buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-check"></i> Confirm'}},callback:function(e){if(e){t.target.disabled=!0;l.default.jobAction(n,{command:"cancel"},t)}}})}));var r=document.getElementById("restart-"+e._id);r&&r.addEventListener("click",(function(t){t.target.disabled=!0;var n=B(e._id);l.default.jobAction(n,{command:"restart"},t)}));var i=document.getElementById("pause-"+e._id);i&&i.addEventListener("click",(function(t){t.target.disabled=!0;var n=B(e._id);l.default.jobAction(n,{command:"pause",action:"pause"},t)}));var o=document.getElementById("resume-"+e._id);o&&o.addEventListener("click",(function(t){t.target.disabled=!0;var n=B(e._id);l.default.jobAction(n,{command:"pause",action:"resume"},t)}));var s=document.getElementById("cameraContain-"+e._id);return s&&s.addEventListener("dblclick",(function(e){(0,m.default)(e.target)})),"done"}function N(e){return void 0!==y[e._id]||(y[e._id]={row:document.getElementById("panel-"+e._id),name:document.getElementById("name-"+e._id),control:document.getElementById("printerButton-"+e._id),connect:document.getElementById("printerQuickConnect-"+e._id),start:document.getElementById("play-"+e._id),stop:document.getElementById("cancel-"+e._id),pause:document.getElementById("pause-"+e._id),restart:document.getElementById("restart-"+e._id),resume:document.getElementById("resume-"+e._id),camera:document.getElementById("camera-"+e._id),currentFile:document.getElementById("currentFile-"+e._id),currentFilament:document.getElementById("currentFilament-"+e._id),state:document.getElementById("state-"+e._id),printTimeElapsed:document.getElementById("printTimeElapsed-"+e._id),remainingPrintTime:document.getElementById("remainingTime-"+e._id),cameraContain:document.getElementById("cameraContain-"+e._id),progress:document.getElementById("progress-"+e._id),bed:document.getElementById("badTemp-"+e._id),chamber:document.getElementById("chamberTemp-"+e._id)}),y[e._id]}function O(e,t,n){return U.apply(this,arguments)}function U(){return(U=v(regeneratorRuntime.mark((function e(t,n,r){var a,i,l,p,m,f,b,g,v,y,h,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=N(t)).row){e.next=3;break}return e.abrupt("return");case 3:if(!t.display){e.next=16;break}if("none"!==a.row.style.display){e.next=14;break}e.t0=r,e.next="list"===e.t0?8:"panel"===e.t0?10:"camera"===e.t0?12:14;break;case 8:return a.row.style.display="table",e.abrupt("break",14);case 10:case 12:return a.row.style.display="block",e.abrupt("break",14);case 14:e.next=18;break;case 16:return"none"!==a.row.style.display&&(a.row.style.display="none"),e.abrupt("return");case 18:(0,c.checkQuickConnectState)(t),a.control.disabled="Offline"===t.printerState.colour.category,o.default.doesElementNeedUpdating(t.printerState.state,a.state,"innerHTML"),"Error!"===(i=t.printerState.colour.category)&&(i="Offline"),o.default.doesElementNeedUpdating(I(t.printerName),a.name,"innerHTML"),e.t1=r,e.next="list"===e.t1?27:"panel"===e.t1?29:"camera"===e.t1?31:33;break;case 27:return o.default.doesElementNeedUpdating(i,a.row,"classList"),e.abrupt("break",33);case 29:return o.default.doesElementNeedUpdating("btn btn-block ".concat(i," mb-1 mt-1"),a.state,"classList"),e.abrupt("break",33);case 31:return o.default.doesElementNeedUpdating("card-body cameraContain text-truncate noBlue ".concat(i),a.cameraContain,"classList"),e.abrupt("break",33);case 33:if(o.default.doesElementNeedUpdating("progress-bar progress-bar-striped bg-".concat(t.printerState.colour.name),a.progress,"classList"),void 0!==t.currentJob?(l=0,"number"==typeof t.currentJob.progress&&(l=t.currentJob.progress.toFixed(0)),o.default.doesElementNeedUpdating(l+"%",a.progress,"innerHTML"),a.progress.style.width=l+"%",a.currentFile.setAttribute("title",t.currentJob.filePath),a.currentFile.innerHTML='<i class="fas fa-file-code"></i> '+t.currentJob.fileDisplay,"Active"===t.printerState.colour.category?(p='\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> '.concat(s.default.generateTime(t.currentJob.printTimeElapsed),'\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> ').concat(s.default.generateTime(t.currentJob.expectedPrintTime),"\n        </small>\n      "),m='\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> '.concat(s.default.generateTime(t.currentJob.printTimeRemaining),'\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> ').concat(t.currentJob.expectedCompletionDate,"\n        </small>\n      "),o.default.doesElementNeedUpdating(p,a.printTimeElapsed,"innerHTML"),o.default.doesElementNeedUpdating(m,a.remainingPrintTime,"innerHTML")):"Complete"===t.printerState.colour.category?(f='\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> '.concat(s.default.generateTime(t.currentJob.printTimeElapsed),'\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> ').concat(s.default.generateTime(t.currentJob.expectedPrintTime),"\n        </small>\n      "),'\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> 0\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> Complete!\n        </small>\n      ',o.default.doesElementNeedUpdating(f,a.printTimeElapsed,"innerHTML"),o.default.doesElementNeedUpdating('\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> 0\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> Complete!\n        </small>\n      ',a.remainingPrintTime,"innerHTML")):('\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> No Active Print\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> No Active Print\n        </small>\n      ','\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> No Active Print\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> No Active Print\n        </small>\n      ',o.default.doesElementNeedUpdating('\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> No Active Print\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> No Active Print\n        </small>\n      ',a.printTimeElapsed,"innerHTML"),o.default.doesElementNeedUpdating('\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> No Active Print\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> No Active Print\n        </small>\n      ',a.remainingPrintTime,"innerHTML"))):('\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> No Active Print\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> No Active Print\n        </small>\n      ','\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> No Active Print\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> No Active Print\n        </small>\n      ',o.default.doesElementNeedUpdating("0%",a.progress,"innerHTML"),a.progress.style.width="0%",o.default.doesElementNeedUpdating('\n        <small title="Print Time Elapsed">\n            <i class="fas fa-hourglass-start"></i> No Active Print\n        </small>\n        <br>\n        <small title="Expected Print Time">\n            <i class="fas fa-clock"></i> No Active Print\n        </small>\n      ',a.printTimeElapsed,"innerHTML"),o.default.doesElementNeedUpdating('\n        <small title="Print Time Remaining">\n            <i class="fas fa-hourglass-end"></i> No Active Print\n        </small>\n        <br>\n        <small title="Estimated Time of Arrival">\n        <i class="fas fa-calendar-alt"></i> No Active Print\n        </small>\n      ',a.remainingPrintTime,"innerHTML"),a.currentFile.setAttribute("title","No File Selected"),a.currentFile.innerHTML='<i class="fas fa-file-code"></i> No File Selected'),null!==t.tools)for(b=Object.keys(t.tools[0]),g=0;g<b.length;g++)b[g].includes("tool")?(v=b[g].replace("tool",""),document.getElementById(t._id+"-temperature-"+v)?(0,d.checkTemps)(document.getElementById(t._id+"-temperature-"+v),t.tools[0][b[g]].actual,t.tools[0][b[g]].target,t.otherSettings.temperatureTriggers,t.printerState.colour.category):(0,d.checkTemps)(document.getElementById(t._id+"-temperature-"+v),0,0,t.otherSettings.temperatureTriggers,t.printerState.colour.category)):b[g].includes("bed")?a.bed&&(0,d.checkTemps)(a.bed,t.tools[0][b[g]].actual,t.tools[0][b[g]].target,t.otherSettings.temperatureTriggers,t.printerState.colour.category):b[g].includes("chamber")&&a.chamber&&(0,d.checkTemps)(a.chamber,t.tools[0][b[g]].actual,t.tools[0][b[g]].target,t.otherSettings.temperatureTriggers,t.printerState.colour.category);if(!Array.isArray(t.selectedFilament)){e.next=54;break}"",y=0;case 39:if(!(y<t.selectedFilament.length)){e.next=52;break}if(h=document.getElementById("".concat(t._id,"-spool-").concat(y)),null===t.selectedFilament[y]){e.next=48;break}return e.next=44,(0,u.checkFilamentManager)();case 44:e.sent,h.innerHTML="".concat(t.selectedFilament[y].spools.material),e.next=49;break;case 48:h.innerHTML="No Spool";case 49:y++,e.next=39;break;case 52:e.next=55;break;case 54:tool.innerHTML="No Spool";case 55:w="",x="",void 0!==n.panelView.hideOff&&n.panelView.hideOff&&(x="hidden"),void 0!==n.panelView.hideClosed&&n.panelView.hideClosed&&(w="hidden"),"Active"===t.printerState.colour.category?(a.row.classList.contains(w)&&a.row.classList.remove(w),a.row.classList.contains(x)&&a.row.classList.remove(x),a.start&&(a.start.disabled=!0,"camera"===r&&(a.start.classList.add("hidden"),a.stop.classList.remove("hidden"))),a.stop&&(a.stop.disabled=!1),"Pausing"===t.printerState.state?(a.start&&"panel"===r&&a.start.classList.remove("hidden"),a.stop&&(a.stop.disabled=!1),a.resume&&"panel"===r&&a.resume.classList.add("hidden"),a.pause&&(a.pause.disabled=!0,a.pause.classList.remove("hidden")),a.restart&&(a.restart.disabled=!0,a.restart.classList.add("hidden"))):"Paused"===t.printerState.state?(a.start&&"panel"===r&&a.start.classList.add("hidden"),a.resume&&(a.resume.disabled=!1,a.resume.classList.remove("hidden")),a.pause&&(a.pause.disabled=!0,a.pause.classList.add("hidden")),a.restart&&(a.restart.disabled=!1,a.restart.classList.remove("hidden"))):(a.start&&"panel"===r&&"camera"===r&&a.start.classList.remove("hidden"),a.resume&&(a.resume.disabled=!0,a.resume.classList.add("hidden")),a.pause&&(a.pause.disabled=!1,a.pause.classList.remove("hidden")),a.restart&&(a.restart.disabled=!0,a.restart.classList.add("hidden")))):"Idle"===t.printerState.colour.category||"Complete"===t.printerState.colour.category?(a.row.classList.contains(w)&&a.row.classList.remove(w),a.row.classList.contains(x)&&a.row.classList.remove(x),null!==t.currentJob&&"No File Selected"!==t.currentJob.fileName?("camera"===r&&(a.start.classList.remove("hidden"),a.stop.classList.add("hidden")),a.start&&(a.start.disabled=!1),a.stop&&(a.stop.disabled=!0),a.resume&&(a.resume.disabled=!0),a.pause&&(a.pause.disabled=!0),a.restart&&(a.restart.disabled=!0)):(a.start&&(a.start.disabled=!0),a.stop&&(a.stop.disabled=!0),a.resume&&(a.resume.disabled=!0),a.pause&&(a.pause.disabled=!0),a.restart&&(a.restart.disabled=!0)),"Paused"===t.printerState.state?(a.start&&"panel"===r&&a.start.classList.add("hidden"),a.stop&&(a.stop.disabled=!1),a.resume&&(a.resume.disabled=!1,a.resume.classList.remove("hidden")),a.pause&&(a.pause.disabled=!0,a.pause.classList.add("hidden")),a.restart&&(a.restart.disabled=!1,a.restart.classList.remove("hidden"))):(a.start&&"panel"===r&&a.start.classList.remove("hidden"),a.resume&&(a.resume.disabled=!0,a.resume.classList.add("hidden")),a.pause&&(a.pause.disabled=!0,a.pause.classList.remove("hidden")),a.restart&&(a.restart.disabled=!0,a.restart.classList.add("hidden")))):"Disconnected"===t.printerState.state?("camera"===r&&(a.start.classList.remove("hidden"),a.stop.classList.add("hidden")),""!==w&&a.row.classList.add(w),a.start&&(a.start.disabled=!0,"panel"===r&&a.start.classList.remove("hidden")),a.stop&&(a.stop.disabled=!0),a.resume&&(a.resume.disabled=!0,a.resume.classList.add("hidden")),a.pause&&(a.pause.disabled=!0,a.pause.classList.remove("hidden")),a.restart&&(a.restart.disabled=!0,a.restart.classList.add("hidden"))):"Offline"===t.printerState.colour.category&&("camera"===r&&(a.start.classList.remove("hidden"),a.stop.classList.add("hidden")),""!==x&&a.row.classList.add(x),a.start&&(a.start.disabled=!0,"panel"===r&&a.start.classList.remove("hidden")),a.stop&&(a.stop.disabled=!0),a.resume&&(a.resume.disabled=!0,a.resume.classList.add("hidden")),a.pause&&(a.pause.disabled=!0,a.pause.classList.remove("hidden")),a.restart&&(a.restart.disabled=!0,a.restart.classList.add("hidden")));case 60:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n){return J.apply(this,arguments)}function J(){return(J=v(regeneratorRuntime.mark((function e(t,n,o){var s,l,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=k.classList.contains("show"),e.next=!0===e.t0?3:!1===e.t0?5:55;break;case 3:return a.default.init("",t,x),e.abrupt("break",55);case 5:s=0;case 6:if(!(s<t.length)){e.next=54;break}if(l=document.getElementById("panel-"+t[s]._id)){e.next=38;break}if("panel"!==o){e.next=16;break}return e.next=12,A(t[s],n);case 12:d=e.sent,S.insertAdjacentHTML("beforeend",d),e.next=28;break;case 16:if("list"!==o){e.next=23;break}return e.next=19,F(t[s],n);case 19:u=e.sent,S.insertAdjacentHTML("beforeend",u),e.next=28;break;case 23:if("camera"!==o){e.next=28;break}return e.next=26,j(t[s],n);case 26:p=e.sent,S.insertAdjacentHTML("beforeend",p);case 28:return l=document.getElementById("panel-"+t[s]._id),e.next=31,(0,c.init)(t[s],"printerActionBtns-".concat(t[s]._id));case 31:return H(t[s]),e.next=34,N(t[s]);case 34:return e.next=36,(0,r.dragAndDropEnable)(l,t[s]);case 36:e.next=51;break;case 38:if(k.classList.contains("show")){e.next=51;break}return e.next=41,(0,r.dragCheck)();case 41:if(e.sent){e.next=44;break}return e.next=44,O(t[s],n,o);case 44:if(!(h>=2e4)){e.next=50;break}return e.next=47,i.default.applyBtn(t[s],"powerBtn-");case 47:h=0,e.next=51;break;case 50:h+=500;case 51:s++,e.next=6;break;case 54:return e.abrupt("break",55);case 55:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{"../functions/calc.js":2,"../functions/dragAndDrop.js":3,"../functions/fullscreen.js":4,"../functions/ui.js":5,"../modules/temperatureCheck.js":16,"../octofarm":18,"../octoprint.js":19,"./Printers/actionButtons.js":7,"./currentOperations":9,"./filamentGrab.js":10,"./powerButton.js":13,"./printerManager.js":14}],18:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"get",value:function(e){var t="/".concat(e);return fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}})}},{key:"delete",value:function(e){var t="/".concat(e);return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}})}},{key:"post",value:function(e,t){var n="/".concat(e);return fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();n.default=a},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./functions/ui.js")),a=i(e("./octofarm.js"));i(e("./functions/validate.js")),e("./modules/filamentGrab.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i,o,l,d,u,p,m,f,b,g;return t=e,n=null,i=[{key:"get",value:function(e,t){var n="".concat(e.printerURL,"/").concat(t);return fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey}}).catch((function(e){console.log(e)}))}},{key:"postNOAPI",value:function(e,t,n){var r="".concat(e.printerURL,"/").concat(t);return fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey},body:JSON.stringify(n)}).catch((function(e){console.log(e)}))}},{key:"post",value:function(e,t,n){var r="".concat(e.printerURL,"/api/").concat(t);return fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey},body:JSON.stringify(n)}).catch((function(e){console.log(e)}))}},{key:"folder",value:function(e,t,n){var r="".concat(e.printerURL,"/api/files/").concat(t);return fetch(r,{method:"POST",headers:{"X-Api-Key":e.apikey},body:n}).catch((function(e){console.log(e)}))}},{key:"move",value:function(e,t,n){var r="".concat(e.printerURL,"/api/").concat(t);return fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey},body:JSON.stringify(n)}).catch((function(e){console.log(e)}))}},{key:"delete",value:function(e,t){var n="".concat(e.printerURL,"/api/").concat(t);return fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey}}).catch((function(e){console.log(e)}))}},{key:"selectTool",value:(g=s(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={command:"select",tool:r},t.next=3,e.post(n,"printer/tool",a);case 3:if(204!==t.sent.status){t.next=8;break}return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)}))),function(e,t){return g.apply(this,arguments)})},{key:"system",value:(b=s(regeneratorRuntime.mark((function t(n,a){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i="system/commands/core/"+a,bootbox.confirm({message:"Are your sure you want to ".concat(a," ").concat(n.printerName,"?"),buttons:{cancel:{label:'<i class="fa fa-times"></i> No'},confirm:{label:'<i class="fa fa-check"></i> Yes'}},callback:function(t){return s(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=5;break}return o.next=3,e.post(n,i).catch((function(e){r.default.createAlert("danger",e,4e3,"Clicked")}));case 3:204===o.sent.status?r.default.createAlert("success","".concat(n.printerName,": ").concat(a," was successful"),3e3,"clicked"):r.default.createAlert("error","".concat(n.printerName,": ").concat(a," was unsuccessful. Please make sure printer is connected and commands are setup in Settings -> Server."),3e3,"clicked");case 5:case"end":return o.stop()}}),o)})))()}});case 2:case"end":return t.stop()}}),t)}))),function(e,t){return b.apply(this,arguments)})},{key:"systemNoConfirm",value:(f=s(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="system/commands/core/"+r,t.next=3,e.post(n,a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(e,t){return f.apply(this,arguments)})},{key:"move",value:(m=s(regeneratorRuntime.mark((function t(n,r,a,i,o){var s,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(){n.target.classList="btn btn-light"},c="printer/printhead",t.next=5,document.querySelectorAll("#pcAxisSteps > .btn.active");case 5:return l=(l=t.sent)[0].innerHTML,d=null,"home"===a?d={command:a,axes:i}:"jog"===a?(l=Number(null!=o?o+l:l),m=l,(p=i)in(u={command:a})?Object.defineProperty(u,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[p]=m,d=u):"feedrate"===a&&(d={command:a,factor:l}),t.next=11,e.post(r,c,d);case 11:204===t.sent.status?(n.target.classList="btn btn-success",setTimeout(s,500)):(n.target.classList="btn btn-danger",setTimeout(s,500));case 13:case"end":return t.stop()}var u,p,m}),t)}))),function(e,t,n,r,a){return m.apply(this,arguments)})},{key:"file",value:(p=s(regeneratorRuntime.mark((function t(n,i,o,s){var c,l,d,u,p,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c="files/local/"+i,l=null,"load"!==o){t.next=9;break}return d={command:"select",print:!1},t.next=6,e.post(n,c,d);case 6:l=t.sent,t.next=26;break;case 9:if("print"!==o){t.next=22;break}return u={command:"select",print:!0},p={command:"flowrate",factor:parseInt(n.flowRate)},t.next=14,e.post(n,"printer/tool",p);case 14:return m={command:"feedrate",factor:parseInt(n.feedRate)},t.next=17,e.post(n,"printer/printhead",m);case 17:return t.next=19,e.post(n,c,u);case 19:l=t.sent,t.next=26;break;case 22:if("delete"!==o){t.next=26;break}return t.next=25,e.delete(n,c);case 25:l=t.sent;case 26:if(204!==l.status){t.next=38;break}if("delete"!==o){t.next=35;break}return f={i:n,fullPath:i},t.next=31,a.default.post("printers/removefile",f);case 31:t.sent,r.default.createAlert("success","".concat(n.printerName,": ").concat(o," completed"),3e3,"clicked"),t.next=36;break;case 35:r.default.createAlert("success","".concat(n.printerName,": ").concat(o," actioned"),3e3,"clicked");case 36:t.next=39;break;case 38:r.default.createAlert("error","".concat(n.printerName,": ").concat(o," failed"),3e3,"clicked");case 39:case"end":return t.stop()}}),t)}))),function(e,t,n,r){return p.apply(this,arguments)})},{key:"jobAction",value:(u=s(regeneratorRuntime.mark((function t(n,r,i){var o,c,l,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get("settings/server/get");case 2:return o=t.sent,t.next=5,o.json();case 5:return o=t.sent,c={command:"flowrate",factor:parseInt(n.flowRate)},t.next=9,e.post(n,"printer/tool",c);case 9:return l={command:"feedrate",factor:parseInt(n.feedRate)},t.next=12,e.post(n,"printer/printhead",l);case 12:if(n._id,d=!1,void 0!==o.filament&&(d=o.filament.filamentCheck),u=!1,null!=n.selectedFilament&&Array.isArray(n.selectedFilament)&&(u=n.selectedFilament.every((function(e){return null!==e}))),!d||u||"start"!==r.command){t.next=21;break}bootbox.confirm({message:"You have spools in the inventory, but none selected. Would you like to select a spool?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(t){return s(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=3;break}a.next=15;break;case 3:if(null==n.selectedFilament||!Array.isArray(n.selectedFilament)){a.next=9;break}return o={command:"offset",offsets:{}},n.selectedFilament.forEach((function(e,t){null!=e&&(o.offsets["tool"+t]=e.spools.tempOffset)})),a.next=8,e.post(n,"printer/tool",o);case 8:a.sent;case 9:return a.next=11,e.post(n,"printer/printhead",l);case 11:return a.next=13,e.post(n,"job",r);case 13:a.sent,i.target.disabled=!1;case 15:case"end":return a.stop()}}),a)})))()}}),t.next=27;break;case 21:return t.next=23,e.post(n,"printer/printhead",l);case 23:return t.next=25,e.post(n,"job",r);case 25:t.sent,i.target.disabled=!1;case 27:case"end":return t.stop()}}),t)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"connect",value:(d=s(regeneratorRuntime.mark((function t(n,a){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=null,i="connect"===n?{command:"connect",port:document.getElementById("pmSerialPort").value,baudrate:parseInt(document.getElementById("pmBaudrate").value),printerProfile:document.getElementById("pmProfile").value,save:!0}:{command:"disconnect"},t.next=4,e.post(a,"connection",i);case 4:void 0!==(o=t.sent)&&204===o.status?(r.default.createAlert("success","".concat(a.printerName,": ").concat(i.command,"ion attempt was successful"),3e3,"click"),"connect"===n?(document.getElementById("pmSerialPort").disabled=!0,document.getElementById("pmBaudrate").disabled=!0,document.getElementById("pmProfile").disabled=!0):(document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1)):(document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1,r.default.createAlert("error","".concat(a.printerName,": could not ").concat(i.command,"."),3e3,"click"));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return d.apply(this,arguments)})},{key:"power",value:(l=s(regeneratorRuntime.mark((function e(t,n,a,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.includes("[PrinterURL]")&&(n=n.replace("[PrinterURL]",t.printerURL)),n.includes("[PrinterAPI]")&&(n=n.replace("[PrinterAPI]",t.apikey)),void 0!==i&&0!==i.length){e.next=9;break}return e.next=5,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"}});case 5:204!==e.sent.status?r.default.createAlert("error","".concat(t.printerName,": Could not complete ").concat(a),3e3):r.default.createAlert("success","".concat(t.printerName,": Successfully completed ").concat(a),3e3),e.next=13;break;case 9:return e.next=11,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":t.apikey},body:i});case 11:204!==e.sent.status?r.default.createAlert("error","".concat(t.printerName,": Could not complete ").concat(a),3e3):r.default.createAlert("success","".concat(t.printerName,": Successfully completed ").concat(a),3e3);case 13:return e.abrupt("return","done");case 14:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return l.apply(this,arguments)})},{key:"getPowerStatus",value:(o=s(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.printerURL),console.log(n),n.includes("[PrinterURL]")&&(n=n.replace("[PrinterURL]",t.printerURL)),n.includes("[PrinterAPI]")&&(n=n.replace("[PrinterAPI]",t.apikey)),void 0!==r&&""!=r){e.next=18;break}return e.next=7,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"}});case 7:if(200===(a=e.sent).status&&204===a.status){e.next=12;break}return e.abrupt("return","No Status");case 12:return e.next=14,a.json();case 14:return a=e.sent,e.abrupt("return",a);case 16:e.next=34;break;case 18:return e.prev=18,e.next=21,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":t.apikey},body:r});case 21:if(i=e.sent,o="No Status",200!==i.status&&204!==i.status){e.next=27;break}return e.next=26,i.json();case 26:o=e.sent;case 27:(s=document.getElementById("printerStatus-"+t._id))&&("No Status"===o?s.style.color="black":o[Object.keys(o)[0]]?s.style.color="green":s.style.color="red"),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(18),console.log("Printer Power Check failed... classing offline:",e.t0);case 34:case"end":return e.stop()}}),e,null,[[18,31]])}))),function(e,t,n){return o.apply(this,arguments)})}],n&&c(t.prototype,n),i&&c(t,i),e}();n.default=l},{"./functions/ui.js":5,"./functions/validate.js":6,"./modules/filamentGrab.js":10,"./octofarm.js":18}]},{},[1]);
//# sourceMappingURL=cameraViewRunner.min.js.map
